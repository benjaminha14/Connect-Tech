{"ast":null,"code":"import { useLoader, useThree, useFrame, useUpdate, extend, Canvas } from 'react-three-fiber';\nimport { TextureLoader, Vector3, AudioListener, PositionalAudio, Color, PMREMGenerator, UnsignedByteType, Vector2, MeshStandardMaterial, DoubleSide, Geometry, FontLoader, VideoTexture, LinearFilter, RGBFormat, ClampToEdgeWrapping, Euler, Raycaster, Quaternion } from 'three';\nimport { createContext, useContext, useState, useRef, useCallback, useEffect, useMemo, Suspense } from 'react';\nimport { useProgress, useGLTF } from '@react-three/drei';\nimport { PositionalAudioHelper } from 'three/examples/jsm/helpers/PositionalAudioHelper';\nimport { RGBELoader } from 'three/examples/jsm/loaders/RGBELoader';\nimport { usePlane, useTrimesh, useConvexPolyhedron, useSphere, Physics } from '@react-three/cannon';\nimport ShopifyBuy from 'shopify-buy';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _taggedTemplateLiteralLoose from '@babel/runtime/helpers/esm/taggedTemplateLiteralLoose';\nimport { keyframes, css, Global } from '@emotion/core';\nimport styled from '@emotion/styled';\nimport { isMobile } from 'react-device-detect';\nimport nipplejs from 'nipplejs';\nimport { PointerLockControls } from 'three/examples/jsm/controls/PointerLockControls';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\nimport { GlitchPass } from 'three/examples/jsm/postprocessing/GlitchPass';\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass';\nimport { GammaCorrectionShader } from 'three/examples/jsm/shaders/GammaCorrectionShader';\nimport { BloomPass } from 'three/examples/jsm/postprocessing/BloomPass';\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader';\nimport styled$1 from '@emotion/styled/';\nimport fetch from 'node-fetch';\nimport { DeviceOrientationControls } from 'three/examples/jsm/controls/DeviceOrientationControls';\nconst IMAGE_SRC = \"https://d27rt3a60hh1lx.cloudfront.net/images/whiteArrow.png\";\nconst IMAGE_SRC_DARK = \"https://d27rt3a60hh1lx.cloudfront.net/images/blackArrow.png\";\n\nconst Arrow = props => {\n  const {\n    dark,\n    ...restProps\n  } = props;\n  const texture = useLoader(TextureLoader, dark ? IMAGE_SRC_DARK : IMAGE_SRC);\n  return /*#__PURE__*/React.createElement(\"group\", restProps, /*#__PURE__*/React.createElement(\"mesh\", {\n    scale: [0.004, 0.004, 0.004]\n  }, /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [98, 51]\n  }), /*#__PURE__*/React.createElement(\"meshStandardMaterial\", {\n    map: texture,\n    attach: \"material\",\n    alphaTest: 0.5,\n    transparent: true,\n    normalMap: texture\n  })));\n};\n\nconst environmentStateContext = /*#__PURE__*/createContext({});\n\nfunction useEnvironment() {\n  return useContext(environmentStateContext);\n}\n\nfunction useEnvironmentState() {\n  const [paused, setPausedState] = useState(true);\n  const [overlay, setOverlayState] = useState(null);\n  const container = useRef(null);\n  const events = useRef([]);\n  const player = useRef({});\n  const setPaused = useCallback((p, o) => {\n    setPausedState(p);\n\n    if (!p) {\n      // if unpausing, set paused overlay to undefined by default\n      setOverlayState(o || null);\n    }\n\n    if (p && o) {\n      // if pausing, only set closed overlay if passed ins\n      setOverlayState(o);\n    }\n\n    events.current.map(ev => {\n      if (ev.name === \"paused\") {\n        ev.callback.apply(null, [p, o]);\n      }\n    });\n  }, [events]);\n\n  const setPlayer = p => {\n    player.current = p;\n  };\n\n  const addEvent = useCallback((name, callback) => {\n    const event = {\n      name,\n      callback\n    };\n    events.current.push(event);\n  }, []);\n  const context = {\n    paused,\n    overlay,\n    player: player.current,\n    containerRef: container,\n    container: container.current,\n    events: events.current,\n    setPaused,\n    setPlayer,\n    addEvent\n  };\n  return context;\n}\n\nconst useControlledProgress = () => {\n  const TIMEOUT = 750;\n  const {\n    progress,\n    total\n  } = useProgress();\n  const startTime = useRef(new Date());\n  const controlledProgress = useRef(0);\n  useEffect(() => {\n    const newTime = new Date();\n    const timeElapsed = newTime.getTime() - startTime.current.getTime();\n    const diff = Math.min(progress - controlledProgress.current, timeElapsed < TIMEOUT ? 99 : 100);\n\n    if (diff > 0) {\n      controlledProgress.current = progress;\n    }\n  }, [progress]); // wait TIMEOUT (ms) to check if any objects are waiting to be loaded\n\n  const [counter, setCounter] = useState(0);\n  const [skip, setSkip] = useState(false);\n  useEffect(() => {\n    if (total > 0) {\n      return;\n    } else if (counter > 0) {\n      setSkip(true);\n    } else {\n      setTimeout(() => setCounter(counter + 1), TIMEOUT);\n    }\n  }, [counter]);\n  return skip ? 100 : Math.floor(controlledProgress.current);\n};\n\nconst Audio = props => {\n  const {\n    url,\n    position = new Vector3(0, 0, 0),\n    dCone,\n    rollOff = 1,\n    volume = 7,\n    helper\n  } = props;\n  const {\n    paused,\n    container\n  } = useEnvironment();\n  const audioRef = useRef();\n  const speaker = useRef();\n  const {\n    camera,\n    scene\n  } = useThree();\n  const listener = useRef();\n  useEffect(() => {\n    if (container && !audioRef.current) {\n      const audio = document.createElement(\"audio\");\n      audio.src = url;\n      audio.autoplay = false;\n      audio.preload = \"auto\";\n      audio.crossOrigin = \"anonymous\";\n      audio.loop = true;\n      container == null ? void 0 : container.appendChild(audio);\n      audioRef.current = audio;\n      return () => {\n        audio.pause();\n\n        if (listener.current) {\n          camera.remove(listener.current);\n        }\n      };\n    }\n  }, [container, audioRef.current]); // audio\n\n  useEffect(() => {\n    if (!paused && camera && audioRef.current && !speaker.current) {\n      listener.current = new AudioListener();\n      camera.add(listener.current);\n      speaker.current = new PositionalAudio(listener.current);\n      speaker.current.setMediaElementSource(audioRef.current);\n      speaker.current.position.copy(position);\n\n      if (dCone) {\n        speaker.current.setDirectionalCone(dCone.x, dCone.y, dCone.z);\n      }\n\n      speaker.current.setRolloffFactor(rollOff);\n      speaker.current.setVolume(volume);\n\n      if (helper) {\n        const helper = new PositionalAudioHelper(speaker.current);\n        speaker.current.add(helper);\n      }\n\n      scene.add(speaker.current);\n    }\n  }, [audioRef.current, camera, speaker.current, listener.current, paused]);\n  useEffect(() => {\n    if (!paused && audioRef.current && audioRef.current.paused) {\n      audioRef.current.play();\n    }\n  }, [paused, audioRef.current]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null);\n};\n\nconst Background = props => {\n  const {\n    color\n  } = props;\n  const {\n    scene\n  } = useThree();\n  const [setup, setSetup] = useState(false);\n  useEffect(() => {\n    if (scene && !setup) {\n      scene.background = new Color(color);\n      setSetup(true);\n    }\n  }, [scene, setup]);\n  return null;\n};\n\nconst HDRI = props => {\n  const {\n    src\n  } = props;\n  const {\n    gl,\n    scene\n  } = useThree(); // pmrem generator for hdri loading\n\n  const pmremGenerator = new PMREMGenerator(gl);\n  pmremGenerator.compileEquirectangularShader(); // actual file loader\n\n  const loader = new RGBELoader();\n  loader.setDataType(UnsignedByteType);\n  useEffect(() => {\n    loader.load(src, texture => {\n      const envMap = pmremGenerator.fromEquirectangular(texture).texture; // sent envmap onto scene env and background\n\n      scene.environment = envMap;\n      scene.background = envMap;\n      texture.dispose();\n      pmremGenerator.dispose();\n    });\n  }, [scene, loader, pmremGenerator]);\n  return null;\n};\n\nconst frameWidth = 0.3;\nconst frameDepth = 0.1;\nconst borderThickness = 0.2;\nconst borderDepth = 0.2;\nconst meshOffset = 0.0005;\n\nconst Image = props => {\n  const {\n    src,\n    sizeScale,\n    ratio,\n    framed,\n    doubleSided,\n    material: passedMaterial,\n    color = 0x111111\n  } = props;\n  const texture = useLoader(TextureLoader, src);\n  const group = useRef();\n  const image = useRef(); // sizing\n\n  const normalizedRatio = new Vector2(ratio[0], ratio[1]).normalize();\n  const width = normalizedRatio.x * sizeScale;\n  const height = normalizedRatio.y * sizeScale;\n  const material = useMemo(() => passedMaterial || new MeshStandardMaterial({\n    color: color,\n    roughness: 0.8,\n    metalness: 0.05\n  }), []);\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, /*#__PURE__*/React.createElement(\"mesh\", {\n    castShadow: true,\n    ref: image\n  }, /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width, height]\n  }), /*#__PURE__*/React.createElement(\"meshStandardMaterial\", {\n    attach: \"material\",\n    map: texture,\n    side: doubleSided ? DoubleSide : undefined\n  })), framed && /*#__PURE__*/React.createElement(React.Fragment, null, !doubleSided && /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-z\": [-0.1 - meshOffset],\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width + frameWidth, height + frameWidth, frameDepth]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-y\": height / 2 + frameWidth / 2 - borderThickness / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width + frameWidth, borderThickness, borderDepth]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-y\": -height / 2 - frameWidth / 2 + borderThickness / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width + frameWidth, borderThickness, borderDepth]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-x\": -width / 2 - frameWidth / 2 + borderThickness / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [borderThickness, height + frameWidth, borderDepth]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-x\": width / 2 + frameWidth / 2 - borderThickness / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [borderThickness, height + frameWidth, borderDepth]\n  })))));\n};\n\nconst InfinitePlane = props => {\n  const {\n    height,\n    size = [100, 100],\n    visible\n  } = props;\n  const [ref] = usePlane(() => ({\n    rotation: [-Math.PI / 2, 0, 0],\n    position: [0, height, 0],\n    args: size,\n    type: \"Static\"\n  }));\n  return /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: ref\n  }, visible && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: size\n  }), /*#__PURE__*/React.createElement(\"meshPhongMaterial\", {\n    attach: \"material\",\n    color: \"#660000\"\n  })));\n};\n\nconst SPEED = 0.2;\nconst FILE_URL = \"https://d27rt3a60hh1lx.cloudfront.net/models/SpacesSphere1/SpacesSphere1.glb\";\n\nconst Logo = props => {\n  const {\n    rotating,\n    floating,\n    ...restProps\n  } = props;\n  const group = useRef();\n  const sphereGroup = useRef();\n  const {\n    nodes,\n    materials\n  } = useGLTF(FILE_URL);\n  useFrame(({\n    clock\n  }) => {\n    if (group.current && rotating) {\n      group.current.rotation.y = clock.getElapsedTime() * SPEED;\n    }\n\n    if (group.current && floating) {\n      group.current.position.y = 0.1 * 2 * Math.sin(clock.getElapsedTime() * SPEED * 2);\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", restProps, /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: null\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    ref: sphereGroup,\n    scale: [100, 100, 100],\n    dispose: null\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    position: [0, 0, 0]\n  }, /*#__PURE__*/React.createElement(\"mesh\", {\n    material: materials.Sphere,\n    geometry: nodes.Sphere.geometry,\n    castShadow: true\n  }))))));\n};\n\nuseGLTF.preload(FILE_URL);\n\nconst useTrimeshCollision = geometry => {\n  const vertices = geometry.attributes.position.array; // @ts-ignore\n\n  const indices = geometry.index.array; // @ts-ignore\n\n  const [hitbox] = useTrimesh(() => ({\n    type: \"Static\",\n    args: [vertices, indices]\n  }));\n  return hitbox;\n};\n\nconst useConvexCollision = geometry => {\n  const geo = useMemo(() => new Geometry().fromBufferGeometry(geometry), [geometry]);\n  const [hitbox] = useConvexPolyhedron(() => ({\n    type: \"Static\",\n    args: geo\n  }));\n  return hitbox;\n};\n\nconst useShopify = props => {\n  const {\n    domain,\n    token\n  } = props;\n  const client = ShopifyBuy.buildClient({\n    domain: domain,\n    storefrontAccessToken: token\n  });\n  const [products, setProducts] = useState();\n  const [checkout, setCheckout] = useState();\n  const [checkoutOpen, setCheckoutOpen] = useState(\"false\");\n  useEffect(() => {\n    if (!products && !checkout) {\n      client.product.fetchAll() // @ts-ignore\n      .then(shopifyProducts => setProducts(shopifyProducts));\n      client.checkout.create() // @ts-ignore\n      .then(shopifyCheckout => setCheckout(shopifyCheckout));\n    }\n  }, [products, checkout]);\n  return {\n    client,\n    products,\n    checkout,\n    setCheckout,\n    checkoutOpen,\n    setCheckoutOpen\n  };\n};\n/**\n *\n * Interactible adds on click and hover methods to any group of Object3D's\n *\n * @param props\n * @constructor\n */\n\n\nconst Interactable = props => {\n  const {\n    children,\n    onClick,\n    onHover,\n    onUnHover\n  } = props;\n  const {\n    player\n  } = useEnvironment();\n  const {\n    raycaster\n  } = player;\n  const group = useRef();\n  const [hovered, setHovered] = useState(false);\n  useFrame(() => {\n    if (group.current && raycaster) {\n      const intersections = raycaster.intersectObject(group.current, true);\n\n      if (intersections && intersections.length > 0) {\n        if (!hovered) {\n          setHovered(true);\n\n          if (onHover) {\n            onHover();\n          }\n        }\n      } else if (hovered) {\n        setHovered(false);\n\n        if (onUnHover) {\n          onUnHover();\n        }\n      }\n    }\n  });\n  useEffect(() => {\n    const checkClick = () => {\n      if (hovered && onClick) {\n        onClick();\n      }\n    };\n\n    document.addEventListener(\"click\", checkClick);\n    return () => {\n      document.removeEventListener(\"click\", checkClick);\n    };\n  }, [hovered, onClick]);\n  return /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, children);\n};\n\nconst Floating = props => {\n  const {\n    children,\n    height = 0.2,\n    speed = 1\n  } = props;\n  const group = useRef();\n  const seed = useRef(Math.random());\n  useFrame(({\n    clock\n  }) => {\n    if (group.current) {\n      group.current.position.y = height * Math.sin(clock.getElapsedTime() * speed * 0.4 + seed.current * 10000);\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, children);\n};\n\nconst Shop = props => {\n  const {\n    domain,\n    token,\n    localProducts,\n    itemSize = 4,\n    itemRatio = [1, 1],\n    spaceBetween = 9,\n    position = [-9, 4, 0],\n    rotation = [0, Math.PI / 9, 0]\n  } = props;\n  const productImages = [];\n  let positionOffset = 0;\n  let offset = 0;\n\n  if (localProducts) {\n    for (const product of localProducts) {\n      const productImage = /*#__PURE__*/React.createElement(Interactable, {\n        onClick: () => window.location.href = product[1],\n        key: product[0]\n      }, /*#__PURE__*/React.createElement(Image, {\n        src: product[0],\n        ratio: itemRatio,\n        sizeScale: itemSize,\n        position: [Math.cos(offset) * 19 + spaceBetween, 2, Math.sin(offset) * 19],\n        rotation: [0, Math.PI / 2 - offset + Math.PI, 0],\n        framed: true\n      }));\n      productImages.push(productImage);\n      offset += 2 * Math.PI / localProducts.length;\n      positionOffset++;\n    }\n\n    return /*#__PURE__*/React.createElement(\"group\", {\n      position: position,\n      rotation: rotation\n    }, productImages);\n  }\n\n  let shopifyState;\n\n  if (domain && token) {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    shopifyState = useShopify({\n      domain: domain,\n      token: token\n    });\n  } // @ts-ignore\n\n\n  const {\n    products\n  } = shopifyState;\n\n  if (products) {\n    // @ts-ignore\n    products.forEach(product => {\n      if (product.images[0]) {\n        const src = product.images[0].src;\n        const productImage = /*#__PURE__*/React.createElement(Image, {\n          src: src,\n          ratio: itemRatio,\n          sizeScale: itemSize,\n          position: [spaceBetween * positionOffset, 2, 0],\n          rotation: [0, Math.PI, 0],\n          framed: true\n        });\n        productImages.push(productImage);\n        positionOffset++;\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"group\", {\n    position: position,\n    rotation: rotation\n  }, productImages);\n};\n\nconst FONT_FILE = \"fonts/Couture_Bold.json\";\n\nconst Text = props => {\n  const {\n    text,\n    vAlign = \"center\",\n    hAlign = \"center\",\n    size = 1,\n    bevel = false,\n    color = \"#000000\",\n    font: fontFile,\n    material,\n    ...restProps\n  } = props;\n  const font = useLoader(FontLoader, fontFile || FONT_FILE);\n  const config = useMemo(() => ({\n    font,\n    size,\n    height: 0.75 * size,\n    curveSegments: 32,\n    bevelEnabled: bevel,\n    bevelThickness: 0.15 * size,\n    bevelSize: 0.0625 * size,\n    bevelOffset: 0,\n    bevelSegments: 8\n  }), [font]);\n  const mesh = useUpdate(self => {\n    const size = new Vector3();\n    self.geometry.computeBoundingBox();\n    self.geometry.boundingBox.getSize(size);\n    self.position.x = hAlign === \"center\" ? -size.x / 2 : hAlign === \"right\" ? 0 : -size.x;\n    self.position.y = vAlign === \"center\" ? -size.y / 2 : vAlign === \"top\" ? 0 : -size.y;\n  }, [text]);\n  return /*#__PURE__*/React.createElement(\"group\", _extends({}, restProps, {\n    scale: [0.1 * size, 0.1 * size, 0.1]\n  }), /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: mesh,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"textGeometry\", {\n    attach: \"geometry\",\n    args: [text, config]\n  }), !material && /*#__PURE__*/React.createElement(\"meshPhongMaterial\", {\n    attach: \"material\",\n    color: color,\n    reflectivity: 30\n  })));\n};\n\nconst frameWidth$1 = 0.3;\nconst frameDepth$1 = 0.1;\nconst borderThickness$1 = 0.2;\nconst borderDepth$1 = 0.2;\nconst meshOffset$1 = 0.0005;\n\nconst Video = props => {\n  const {\n    src,\n    sizeScale,\n    ratio,\n    framed,\n    position,\n    rotation,\n    muted,\n    doubleSided\n  } = props;\n  const {\n    camera,\n    scene\n  } = useThree();\n  const {\n    container,\n    paused\n  } = useEnvironment();\n  const group = useRef(); // video state\n\n  const videoRef = useRef();\n  const textureRef = useRef();\n  const [texReady, setTexReady] = useState(false); // audio refs\n\n  const listener = useRef();\n  const speaker = useRef();\n  useFrame(() => {\n    var _videoRef$current;\n\n    if (!texReady && (videoRef == null ? void 0 : videoRef.current) && (videoRef == null ? void 0 : (_videoRef$current = videoRef.current) == null ? void 0 : _videoRef$current.currentTime) > 0) {\n      setTexReady(true);\n    }\n  });\n  const material = useMemo(() => new MeshStandardMaterial({\n    color: 0x111111,\n    roughness: 0.8,\n    metalness: 0.05\n  }), []); // sizing\n\n  const normalizedRatio = new Vector2(ratio[0], ratio[1]).normalize();\n  const width = normalizedRatio.x * sizeScale;\n  const height = normalizedRatio.y * sizeScale; // video textures use effect\n\n  useEffect(() => {\n    if (container && !videoRef.current) {\n      // build video dom element\n      const video = document.createElement(\"video\");\n      const source = document.createElement(\"source\");\n      source.src = src;\n      video.loop = true; //@ts-ignore\n\n      video.playsInline = true;\n      video.crossOrigin = \"anonymous\";\n      video.preload = \"auto\";\n      video.autoplay = false;\n      video.muted = muted || false;\n      video.style.position = \"absolute\";\n      video.style.opacity = \"0\";\n      video.style.pointerEvents = \"none\";\n      video.style.visibility = \"hidden\"; // add to parent container\n\n      container.appendChild(video);\n      video.appendChild(source); // create video texture\n\n      const texture = new VideoTexture(video);\n      texture.minFilter = LinearFilter;\n      texture.magFilter = LinearFilter;\n      texture.format = RGBFormat;\n      texture.matrixAutoUpdate = false;\n      texture.wrapS = ClampToEdgeWrapping;\n      texture.wrapT = ClampToEdgeWrapping;\n      videoRef.current = video;\n      textureRef.current = texture;\n      return () => {\n        video.pause();\n        video.remove();\n        videoRef.current = undefined;\n        texture.dispose();\n        textureRef.current = undefined;\n\n        if (speaker.current) {\n          speaker.current.disconnect();\n          speaker.current = undefined;\n        }\n\n        if (listener.current) {\n          camera.remove(listener.current);\n        }\n\n        setTexReady(false);\n      };\n    }\n  }, [container, videoRef == null ? void 0 : videoRef.current]); // audio useeffect\n\n  useEffect(() => {\n    if (!muted && !paused && camera && videoRef.current && !speaker.current) {\n      listener.current = new AudioListener();\n      camera.add(listener.current);\n      speaker.current = new PositionalAudio(listener.current);\n      speaker.current.setMediaElementSource(videoRef.current);\n      speaker.current.setRefDistance(0.75);\n      speaker.current.setRolloffFactor(1);\n      speaker.current.setVolume(1);\n      speaker.current.setDirectionalCone(180, 230, 0.1);\n\n      if (position) {\n        // @ts-ignore due to bad types, it's an array though\n        speaker.current.position.set(position[0], position[1], position[2]);\n      }\n\n      if (rotation) {\n        // @ts-ignore due to bad types, it's an array though\n        speaker.current.rotation.set(rotation[0], rotation[1], rotation[2]);\n      }\n\n      scene.add(speaker.current);\n    }\n  }, [videoRef.current, camera, speaker.current, listener.current, paused]); // play video if player closes menu\n\n  useEffect(() => {\n    if (!paused && videoRef.current && videoRef.current.paused) {\n      videoRef.current.play();\n    }\n  }, [paused]);\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, texReady && /*#__PURE__*/React.createElement(\"mesh\", null, /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width, height]\n  }), /*#__PURE__*/React.createElement(\"meshStandardMaterial\", {\n    attach: \"material\",\n    map: textureRef.current,\n    side: doubleSided ? DoubleSide : undefined\n  })), framed && /*#__PURE__*/React.createElement(React.Fragment, null, !doubleSided && /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-z\": [-0.1 - meshOffset$1],\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width + frameWidth$1, height + frameWidth$1, frameDepth$1]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-y\": height / 2 + frameWidth$1 / 2 - borderThickness$1 / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width + frameWidth$1, borderThickness$1, borderDepth$1]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-y\": -height / 2 - frameWidth$1 / 2 + borderThickness$1 / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width + frameWidth$1, borderThickness$1, borderDepth$1]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-x\": -width / 2 - frameWidth$1 / 2 + borderThickness$1 / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [borderThickness$1, height + frameWidth$1, borderDepth$1]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-x\": width / 2 + frameWidth$1 / 2 - borderThickness$1 / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [borderThickness$1, height + frameWidth$1, borderDepth$1]\n  })))));\n};\n\nfunction _templateObject3() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  width: 90%;\\n  height: 90%;\\n  max-width: 500px;\\n  max-height: 500px;\\n  background-image: url(\", \");\\n  background-size: contain;\\n  background-position: center;\\n  background-repeat: no-repeat;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  opacity: 0.4;\\n  animation: \", \" 7s ease-in-out infinite;\\n\"]);\n\n  _templateObject3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteralLoose([\"\\n        0% {\\n            transform: translate(-50%, -50%) translateY(0px)\\n    }\\n    \\n        50% {\\n            transform: translate(-50%, -50%) translateY(-15px)\\n    }\\n    \\n        100% {\\n            transform: translate(-50%, -50%) translateY(0px)\\n    }\\n\"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  z-index: 9999;\\n  background: white;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n  text-align: center;\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nconst Container = styled.div(_templateObject());\nconst IMAGE_SRC$1 = \"https://d27rt3a60hh1lx.cloudfront.net/images/spaces-logo.png\";\nconst float = keyframes(_templateObject2());\nconst Image$1 = styled.div(_templateObject3(), IMAGE_SRC$1, float);\nconst INVALID_KEYWORDS = [\"FBAN\", \"FBAV\", \"Instagram\"];\n\nconst BrowserChecker = props => {\n  const {\n    children\n  } = props;\n  const [valid, setValid] = useState(true);\n  useEffect(() => {\n    const ua = navigator.userAgent || navigator.vendor || \"\";\n    const valid = INVALID_KEYWORDS.filter(val => ua.includes(val));\n    setValid(valid.length === 0);\n  }, []);\n\n  if (valid) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n  }\n\n  return /*#__PURE__*/React.createElement(Container, null, /*#__PURE__*/React.createElement(Image$1, null), \"This browser cannot run our application.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"Click those three dots at the top right\", /*#__PURE__*/React.createElement(\"br\", null), \"to open in Safari or Chrome.\");\n};\n\nfunction _templateObject$1() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: fixed;\\n  top: 50vh;\\n  left: 50vw;\\n  z-index: 1;\\n  mix-blend-mode: difference;\\n\\n  &::before {\\n    content: \\\"\\\";\\n    display: block;\\n    height: 11px;\\n    border-left: 1px solid #fff;\\n    margin-bottom: -6px;\\n  }\\n\\n  &::after {\\n    content: \\\"\\\";\\n    display: block;\\n    width: 11px;\\n    border-top: 1px solid #fff;\\n    margin-left: -5px;\\n  }\\n\"]);\n\n  _templateObject$1 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nconst Element = styled.div(_templateObject$1());\n\nconst Crosshair = () => {\n  return /*#__PURE__*/React.createElement(Element, null);\n};\n\nconst DefaultTouch = {\n  pos: new Vector2(0, 0),\n  id: -1\n};\nconst DRAG_SENSITIVITY = new Vector2(0.7, 0.7);\n/**\n * TouchFPSCamera controls the camera rotation by detecting\n * touch drag on the screen. Unlike MouseFPSCamera, this component\n * does not have a way to pause, that must be done externally.\n *\n * @param props\n * @constructor\n */\n\nconst TouchFPSCamera = props => {\n  const {\n    quaternion,\n    position\n  } = props;\n  const touchStartPos = useRef(DefaultTouch);\n  const originEuler = useRef(new Euler(0, 0, 0, \"YXZ\"));\n  const {\n    camera\n  } = useThree();\n  useFrame(() => {\n    if (position.current) {\n      var _camera$position;\n\n      const {\n        x: pX,\n        y: pY,\n        z: pZ\n      } = position.current;\n      camera == null ? void 0 : (_camera$position = camera.position) == null ? void 0 : _camera$position.set(pX, pY, pZ);\n    }\n  });\n\n  const getNewEuler = (dragX, dragY) => {\n    const newEuler = originEuler.current.clone();\n    const moveX = dragX - touchStartPos.current.pos.x;\n    const moveY = dragY - touchStartPos.current.pos.y;\n    newEuler.setFromQuaternion(camera.quaternion);\n    newEuler.y = originEuler.current.y - moveX * DRAG_SENSITIVITY.x / 100;\n    newEuler.x = originEuler.current.x - moveY * DRAG_SENSITIVITY.y / 100;\n    newEuler.x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, newEuler.x));\n    return newEuler;\n  };\n\n  const tappedNipple = ev => {\n    // get the relevant touched element (casted as an Element)\n    const ele = ev.touches[ev.touches.length - 1].target;\n    return ele.classList.contains(\"nipple-container\") || ele.classList.contains(\"front\") || ele.classList.contains(\"back\");\n  };\n\n  const getCurrentTouch = touches => {\n    const len = touches.length;\n\n    for (let i = 0; i < len; i++) {\n      if (touchStartPos.current.id === touches[i].identifier) {\n        return touches[i];\n      }\n    }\n\n    return undefined;\n  }; // touch move scripts\n\n\n  const onTouchStart = ev => {\n    if (touchStartPos.current.id !== -1) {\n      return;\n    }\n\n    if (tappedNipple(ev)) {\n      touchStartPos.current = DefaultTouch;\n      return;\n    } // get last in list (most recent touch) to not confuse with movement\n\n\n    const touchIndex = ev.touches.length - 1;\n    const {\n      clientX,\n      clientY,\n      identifier: id\n    } = ev.touches[touchIndex];\n    touchStartPos.current = {\n      pos: new Vector2(clientX, clientY),\n      id\n    };\n  };\n\n  const onTouchMove = ev => {\n    const touch = getCurrentTouch(ev.touches);\n\n    if (!touch) {\n      return;\n    }\n\n    const {\n      clientX,\n      clientY\n    } = touch;\n    const newEuler = getNewEuler(clientX, clientY);\n    camera.quaternion.setFromEuler(newEuler);\n    quaternion.current = camera.quaternion;\n  };\n\n  const onTouchEnd = ev => {\n    const touch = getCurrentTouch(ev.changedTouches);\n\n    if (!touch) {\n      return;\n    }\n\n    const {\n      clientX,\n      clientY\n    } = touch;\n    originEuler.current = getNewEuler(clientX, clientY);\n    touchStartPos.current.id = -1;\n  };\n\n  useEffect(() => {\n    camera == null ? void 0 : camera.lookAt(0, 2, 0);\n    quaternion.current = camera.quaternion;\n  }, []);\n  useEffect(() => {\n    document.addEventListener(\"touchstart\", onTouchStart);\n    document.addEventListener(\"touchmove\", onTouchMove);\n    document.addEventListener(\"touchend\", onTouchEnd);\n    return () => {\n      document.removeEventListener(\"touchstart\", onTouchStart);\n      document.removeEventListener(\"touchmove\", onTouchMove);\n      document.removeEventListener(\"touchend\", onTouchEnd);\n    };\n  }, []); // @ts-ignore\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null);\n};\n/**\n * NippleMovement gives the player a direction to move by taking\n * input from a nipple (joystick).\n *\n * Direction is stored as a Vector3 with the following format\n *    x: left/right movement, + for right\n *    y: forward/back movement, + for forwards\n *    z: up/down movement, + for up\n *\n * @param props\n * @constructor\n */\n\n\nconst NippleMovement = props => {\n  const {\n    direction,\n    nippleContainer\n  } = props;\n  const nipple = useRef();\n  const {\n    container\n  } = useEnvironment();\n  useEffect(() => {\n    if (container) {\n      nippleContainer.current = document.createElement(\"divs\");\n      nippleContainer.current.style.position = \"fixed\";\n      nippleContainer.current.style.left = \"0\";\n      nippleContainer.current.style.bottom = \"0\";\n      nippleContainer.current.style.width = \"40%\";\n      nippleContainer.current.style.maxWidth = \"160px\";\n      nippleContainer.current.style.height = \"25%\";\n      nippleContainer.current.style.height = \"160px\";\n      nippleContainer.current.style.zIndex = \"5\"; // add class identifier to nippleContainer to identify touchEvents\n\n      nippleContainer.current.classList.add(\"nipple-container\");\n      container.appendChild(nippleContainer.current);\n      nipple.current = nipplejs.create({\n        zone: nippleContainer.current,\n        mode: \"static\",\n        position: {\n          left: \"50%\",\n          top: \"50%\"\n        },\n        color: \"gray\",\n        size: 120,\n        restOpacity: 0.5\n      });\n      nipple.current.on(\"move\", (evt, data) => {\n        direction.current.set(data.vector.x, -data.vector.y, 0);\n      });\n      nipple.current.on(\"end\", () => {\n        direction.current.set(0, 0, 0);\n      });\n      return () => {\n        if (nipple.current) {\n          nipple.current.destroy();\n        }\n      };\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null);\n};\n\nconst MobileControls = props => {\n  const {\n    direction,\n    quaternion,\n    position\n  } = props;\n  const nippleContainer = useRef(null);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NippleMovement, {\n    direction: direction,\n    nippleContainer: nippleContainer\n  }), /*#__PURE__*/React.createElement(TouchFPSCamera, {\n    quaternion: quaternion,\n    position: position,\n    nippleContainer: nippleContainer\n  }));\n};\n/**\n * KeyboardMovement gives the player a direction to move by taking\n * input from any source (currently keyboard) and calculating\n * relative direction.\n *\n * Direction is stored as a Vector3 with the following format\n *    x: left/right movement, + for right\n *    y: forward/back movement, + for forwards\n *    z: up/down movement, + for up\n *\n * @param props\n * @constructor\n */\n\n\nconst KeyboardMovement = props => {\n  const {\n    direction\n  } = props;\n  const pressedKeys = useRef([false, false, false, false]); // key events\n\n  const calcDirection = () => {\n    const press = pressedKeys.current; // [w, a, s, d]\n\n    const yAxis = -1 * Number(press[0]) + Number(press[2]);\n    const xAxis = -1 * Number(press[1]) + Number(press[3]);\n    return new Vector3(xAxis, yAxis, 0);\n  };\n\n  const onKeyDown = ev => {\n    if (ev.key === \"w\" || ev.key === \"W\" || ev.key === \"ArrowUp\") {\n      pressedKeys.current[0] = true;\n    }\n\n    if (ev.key === \"a\" || ev.key === \"A\" || ev.key === \"ArrowLeft\") {\n      pressedKeys.current[1] = true;\n    }\n\n    if (ev.key === \"s\" || ev.key === \"S\" || ev.key === \"ArrowDown\") {\n      pressedKeys.current[2] = true;\n    }\n\n    if (ev.key === \"d\" || ev.key === \"D\" || ev.key === \"ArrowRight\") {\n      pressedKeys.current[3] = true;\n    }\n\n    direction.current = calcDirection();\n  };\n\n  const onKeyUp = ev => {\n    if (ev.key === \"w\" || ev.key === \"W\" || ev.key === \"ArrowUp\") {\n      pressedKeys.current[0] = false;\n    }\n\n    if (ev.key === \"a\" || ev.key === \"A\" || ev.key === \"ArrowLeft\") {\n      pressedKeys.current[1] = false;\n    }\n\n    if (ev.key === \"s\" || ev.key === \"S\" || ev.key === \"ArrowDown\") {\n      pressedKeys.current[2] = false;\n    }\n\n    if (ev.key === \"d\" || ev.key === \"D\" || ev.key === \"ArrowRight\") {\n      pressedKeys.current[3] = false;\n    }\n\n    direction.current = calcDirection();\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", onKeyDown);\n    document.addEventListener(\"keyup\", onKeyUp);\n    return () => {\n      document.removeEventListener(\"keydown\", onKeyDown);\n      document.removeEventListener(\"keyup\", onKeyUp);\n    };\n  }, [onKeyUp, onKeyDown]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null);\n};\n\nextend({\n  PointerLockControls\n});\n/**\n * MouseFPSCamera controls the camera rotation, set up as a first\n * person view. It takes care of user input to set the camera rotation\n * and passed the quaternion of the camera up. Its position is attached\n * to the passed position, probably the player's position.\n *\n * @param props\n * @constructor\n */\n\nconst MouseFPSCamera = props => {\n  const {\n    quaternion,\n    position\n  } = props;\n  const {\n    setPaused,\n    paused,\n    addEvent\n  } = useEnvironment();\n  const {\n    camera,\n    gl\n  } = useThree();\n  const controls = useRef();\n  useFrame(() => {\n    var _controls$current;\n\n    if ((controls == null ? void 0 : (_controls$current = controls.current) == null ? void 0 : _controls$current.isLocked) === true) {\n      const lookAt = new Vector3(0, 0, -1);\n      lookAt.applyQuaternion(camera.quaternion);\n      lookAt.multiply(new Vector3(1, 0, 1)).normalize();\n      quaternion.current = camera.quaternion;\n    }\n\n    if (position.current) {\n      var _camera$position;\n\n      const {\n        x: pX,\n        y: pY,\n        z: pZ\n      } = position.current;\n      camera == null ? void 0 : (_camera$position = camera.position) == null ? void 0 : _camera$position.set(pX, pY, pZ);\n    }\n  }); // pointer locking events\n\n  const onLock = () => {\n    // dont't need to set if it's already set\n    if (paused) {\n      setPaused(false);\n    }\n  };\n\n  const onUnlock = () => {\n    // dont't need to set if it's already set\n    if (!paused) {\n      setPaused(true);\n    }\n  };\n\n  const lockCamera = () => {\n    var _controls$current2;\n\n    return controls == null ? void 0 : (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.lock();\n  };\n\n  const unlockCamera = () => {\n    var _controls$current3;\n\n    return controls == null ? void 0 : (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.unlock();\n  };\n\n  useEffect(() => {\n    // initial camera rotation\n    if (camera && quaternion) {\n      camera == null ? void 0 : camera.lookAt(0, 2, 0);\n      quaternion.current = camera.quaternion;\n    } // lock and unlock controls based on set paused value\n\n\n    addEvent(\"paused\", (pausedVal, overlayVal) => {\n      if (pausedVal) {\n        unlockCamera();\n      } else {\n        lockCamera();\n      }\n    });\n  }, []);\n  useEffect(() => {\n    var _controls$current5, _controls$current6;\n\n    setTimeout(() => {\n      var _controls$current4;\n\n      if (!(controls == null ? void 0 : (_controls$current4 = controls.current) == null ? void 0 : _controls$current4.isLocked) && !paused) {\n        setPaused(true);\n      }\n    }, 250);\n    controls == null ? void 0 : (_controls$current5 = controls.current) == null ? void 0 : _controls$current5.addEventListener(\"lock\", onLock);\n    controls == null ? void 0 : (_controls$current6 = controls.current) == null ? void 0 : _controls$current6.addEventListener(\"unlock\", onUnlock);\n    return () => {\n      var _controls$current7, _controls$current8;\n\n      controls == null ? void 0 : (_controls$current7 = controls.current) == null ? void 0 : _controls$current7.removeEventListener(\"lock\", onLock);\n      controls == null ? void 0 : (_controls$current8 = controls.current) == null ? void 0 : _controls$current8.removeEventListener(\"unlock\", onUnlock);\n    };\n  }, [paused, controls]); // @ts-ignore\n\n  return /*#__PURE__*/React.createElement(\"pointerLockControls\", {\n    ref: controls,\n    args: [camera, gl.domElement]\n  });\n};\n\nconst DesktopControls = props => {\n  const {\n    direction,\n    quaternion,\n    position\n  } = props;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(KeyboardMovement, {\n    direction: direction\n  }), /*#__PURE__*/React.createElement(MouseFPSCamera, {\n    quaternion: quaternion,\n    position: position\n  }));\n};\n\nfunction createPlayerRef(bodyApi, position, velocity, lockControls, raycaster) {\n  const posVec = {\n    set: vec => bodyApi.position.set(vec.x, vec.y, vec.z),\n    get: () => position.current\n  };\n  const velVec = {\n    set: vec => bodyApi.velocity.set(vec.x, vec.y, vec.z),\n    get: () => velocity.current\n  };\n  const controls = {\n    lock: () => lockControls.current = true,\n    unlock: () => lockControls.current = false,\n    isLocked: () => lockControls.current\n  };\n  const playerRef = {\n    position: posVec,\n    velocity: velVec,\n    controls,\n    raycaster: raycaster.current\n  };\n  return playerRef;\n}\n\nconst VELOCITY_FACTOR = 250;\nconst SHOW_PLAYER_HITBOX = false;\n/**\n * Player represents a physics-enabled player in the environment, complete with a\n * control scheme and a physical representation that interacts with other physics-\n * enabled objects.\n *\n * There should only be one player per environment.\n *\n * @constructor\n */\n\nconst Player = props => {\n  const {\n    initPos = new Vector3(0, 1, 0),\n    initRot = 0\n  } = props;\n  const {\n    camera\n  } = useThree();\n  const {\n    paused,\n    setPlayer\n  } = useEnvironment(); // physical body\n\n  const [bodyRef, bodyApi] = useSphere(() => ({\n    mass: 500,\n    position: initPos.toArray(),\n    args: 1,\n    fixedRotation: true\n  })); // producer\n\n  const prevTime = useRef(performance.now());\n  const position = useRef(new Vector3(0, 0, 0));\n  const velocity = useRef(new Vector3(0, 0, 0));\n  const lockControls = useRef(false);\n  const raycaster = useRef(new Raycaster(new Vector3(), new Vector3(), 0, 3)); // consumer\n\n  const direction = useRef(new Vector3());\n  const quaternion = useRef(new Quaternion(0, 0, 0, 0)); // rad on y axis\n  // setup player\n\n  useEffect(() => {\n    // store position and velocity\n    bodyApi.position.subscribe(p => {\n      position.current.set(p[0], p[1], p[2]);\n    });\n    bodyApi.velocity.subscribe(v => velocity.current.set(v[0], v[1], v[2]));\n    const xLook = initPos.x + 100 * Math.cos(initRot);\n    const zLook = initPos.z + 100 * Math.sin(initRot);\n    camera == null ? void 0 : camera.lookAt(xLook, initPos.y, zLook);\n    setPlayer(createPlayerRef(bodyApi, position, velocity, lockControls, raycaster));\n  }, []); // update player every frame\n\n  useFrame(() => {\n    const time = performance.now(); // update raycaster\n\n    if (position.current && quaternion.current) {\n      raycaster.current.ray.origin.copy(position.current);\n      const lookAt = new Vector3(0, 0, -1);\n      lookAt.applyQuaternion(quaternion.current);\n      raycaster.current.ray.direction.copy(lookAt);\n    }\n\n    if (paused) {\n      // stop player from moving when paused\n      bodyApi == null ? void 0 : bodyApi.velocity.set(0, 0, 0);\n    } else {\n      // get time since last computation\n      const delta = (time - prevTime.current) / 1000; // get forward/back movement and left/right movement velocities\n\n      const inputVelocity = new Vector3(0, 0, 0);\n\n      if (!lockControls.current) {\n        inputVelocity.x = direction.current.x * delta * 0.75 * VELOCITY_FACTOR;\n        inputVelocity.z = direction.current.y * delta * VELOCITY_FACTOR;\n      } // apply quaternion to get adjusted direction based on camera\n\n\n      const moveQuaternion = quaternion.current.clone();\n      moveQuaternion.x = 0;\n      moveQuaternion.z = 0;\n      inputVelocity.applyQuaternion(moveQuaternion); // keep y velocity intact and update velocity\n\n      inputVelocity.add(new Vector3(0, velocity.current.y, 0));\n      bodyApi == null ? void 0 : bodyApi.velocity.set(inputVelocity.x, inputVelocity.y, inputVelocity.z);\n    }\n\n    prevTime.current = time;\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, isMobile ? /*#__PURE__*/React.createElement(MobileControls, {\n    quaternion: quaternion,\n    position: position,\n    direction: direction\n  }) : /*#__PURE__*/React.createElement(DesktopControls, {\n    quaternion: quaternion,\n    position: position,\n    direction: direction\n  }), /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: bodyRef,\n    name: \"player\"\n  }, SHOW_PLAYER_HITBOX));\n};\n\nfunction _templateObject$2() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: 200;\\n  background: white;\\n  transition: opacity 0.5s ease;\\n  transition-delay: 0.25s;\\n  opacity: \", \";\\n  pointer-events: \", \";\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n\"]);\n\n  _templateObject$2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nconst Container$1 = styled.div(_templateObject$2(), props => props.finished ? 0 : 1, props => props.finished ? \"none\" : \"all\");\n\nconst LoadingScreen = () => {\n  const progress = useControlledProgress();\n  return /*#__PURE__*/React.createElement(Container$1, {\n    finished: progress == 100,\n    landing: false\n  }, progress, \"%\");\n};\n\nextend({\n  EffectComposer,\n  RenderPass,\n  GlitchPass,\n  ShaderPass,\n  BloomPass\n});\n\nconst RealisticEffects = () => {\n  const {\n    gl,\n    scene,\n    camera,\n    size\n  } = useThree();\n  const gammaCorrection = new ShaderPass(GammaCorrectionShader);\n  const fxaaPass = new ShaderPass(FXAAShader);\n  const pixelRatio = window ? window.devicePixelRatio : 2; // @ts-ignore\n\n  fxaaPass.material.uniforms[\"resolution\"].value.x = 1 / (window.innerWidth * pixelRatio); // @ts-ignore\n\n  fxaaPass.material.uniforms[\"resolution\"].value.y = 1 / (window.innerHeight * pixelRatio);\n  const composer = useRef();\n  useEffect(() => {\n    var _composer$current;\n\n    return void (composer == null ? void 0 : (_composer$current = composer.current) == null ? void 0 : _composer$current.setSize(size.width, size.height));\n  }, [size]);\n  useEffect(() => {\n    var _composer$current2, _composer$current3;\n\n    gammaCorrection.renderToScreen = true;\n    composer == null ? void 0 : (_composer$current2 = composer.current) == null ? void 0 : _composer$current2.addPass(gammaCorrection);\n    fxaaPass.renderToScreen = true;\n    composer == null ? void 0 : (_composer$current3 = composer.current) == null ? void 0 : _composer$current3.addPass(fxaaPass);\n  }, []);\n  useFrame(() => {\n    var _composer$current4;\n\n    composer == null ? void 0 : (_composer$current4 = composer.current) == null ? void 0 : _composer$current4.render();\n  }, 1);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"effectComposer\", {\n    ref: composer,\n    args: [gl]\n  }, /*#__PURE__*/React.createElement(\"renderPass\", {\n    attachArray: \"passes\",\n    args: [scene, camera]\n  })));\n};\n\nfunction _templateObject9() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: auto;\\n  margin: 10px 0;\\n  font-family: \\\"Space Mono\\\", monospace;\\n  font-size: 0.7em;\\n  text-align: center;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n\"]);\n\n  _templateObject9 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  font-size: 2em;\\n  text-align: center;\\n  margin-bottom: 0em;\\n  line-height: 1em;\\n\"]);\n\n  _templateObject8 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  margin-top: 8%;\\n  width: auto;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  font-family: \\\"Lato\\\", sans-serif;\\n\"]);\n\n  _templateObject7 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  top: 24px;\\n  left: 60px;\\n  width: auto;\\n  height: auto;\\n  color: white;\\n  cursor: pointer;\\n  transition: opacity 0.15s linear;\\n  font-size: 0.6em;\\n  line-height: 1em;\\n  :hover {\\n    opacity: 0.5;\\n  }\\n\"]);\n\n  _templateObject6 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  top: 24px;\\n  right: 60px;\\n  font-size: 0.6em;\\n\"]);\n\n  _templateObject5 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 90%;\\n  max-width: 400px;\\n  height: auto;\\n  cursor: pointer;\\n  text-align: center;\\n  font-size: 1.3em;\\n  font-family: \\\"Lato\\\", sans-serif;\\n  transition: opacity 0.15s linear;\\n  margin-top: 20px;\\n  background: white;\\n  line-height: 1em;\\n  padding: 12px 0;\\n  border-radius: 10px;\\n  :hover {\\n    opacity: 0.5;\\n  }\\n\"]);\n\n  _templateObject4 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3$1() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 90%;\\n  max-width: 400px;\\n  height: 91vw;\\n  max-height: 400px;\\n  padding: 20px 20px;\\n  color: white;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  position: relative;\\n  border-radius: 3%;\\n  background-image: url(\\\"https://spaces-gallery-assets.s3-us-west-1.amazonaws.com/images/pauseMenuBg.png\\\");\\n  background-position: center;\\n  background-size: cover;\\n\"]);\n\n  _templateObject3$1 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2$1() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: -1;\\n\"]);\n\n  _templateObject2$1 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject$3() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: 100;\\n  transition: opacity 0.25s ease;\\n  background: rgba(0, 0, 0, 0.5);\\n  display: flex;\\n  justify-content: center;\\n  flex-direction: column;\\n  align-items: center;\\n  opacity: \", \";\\n  pointer-events: \", \";\\n\"]);\n\n  _templateObject$3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nconst {\n  NEXT_PUBLIC_VERSION\n} = process.env;\nconst Container$2 = styled.div(_templateObject$3(), props => props.paused ? 1 : 0, props => props.paused ? \"all\" : \"none\");\nconst ClickContainer = styled.div(_templateObject2$1());\nconst Window = styled.div(_templateObject3$1());\nconst Continue = styled.div(_templateObject4());\nconst Version = styled.a(_templateObject5());\nconst Instagram = styled.div(_templateObject6());\nconst Header = styled.div(_templateObject7());\nconst Title = styled.div(_templateObject8());\nconst Text$1 = styled.div(_templateObject9());\n\nconst DesktopPause = () => {\n  const {\n    paused,\n    overlay,\n    setPaused\n  } = useEnvironment();\n\n  const closeOverlay = () => setPaused(false);\n\n  if (overlay) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(Container$2, {\n    paused: paused\n  }, /*#__PURE__*/React.createElement(ClickContainer, {\n    onClick: closeOverlay\n  }), /*#__PURE__*/React.createElement(Window, null, /*#__PURE__*/React.createElement(Version, null, \"v \", NEXT_PUBLIC_VERSION), /*#__PURE__*/React.createElement(Instagram, {\n    onClick: () => {\n      window.open(\"https://www.instagram.com/spaces3.0\");\n    }\n  }, \"@spaces3.0\"), /*#__PURE__*/React.createElement(Header, null, /*#__PURE__*/React.createElement(Title, null, \"SPACES\")), /*#__PURE__*/React.createElement(Text$1, null, /*#__PURE__*/React.createElement(\"p\", null, \"Move around: \", isMobile ? \"Joystick\" : \"W/A/S/D\"), /*#__PURE__*/React.createElement(\"p\", null, \"Look around: \", isMobile ? \"Drag\" : \"Mouse\"), /*#__PURE__*/React.createElement(\"p\", null, \"Pause: \", isMobile ? \"Menu Button\" : \"Esc\"))), /*#__PURE__*/React.createElement(Continue, {\n    onClick: closeOverlay\n  }, \"continue\"));\n};\n\nfunction _templateObject3$2() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 60px;\\n  height: 60px;\\n  margin: 10px;\\n  border-radius: 50%;\\n  text-align: center;\\n  background: url(\\\"https://spaces-gallery-assets.s3-us-west-1.amazonaws.com/images/spacesLogoReal.png\\\")\\n    center center no-repeat;\\n  background-size: cover;\\n\"]);\n\n  _templateObject3$2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2$2() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  z-index: 10;\\n\"]);\n\n  _templateObject2$2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject$4() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  z-index: 9;\\n\"]);\n\n  _templateObject$4 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nconst Container$3 = styled.div(_templateObject$4());\nconst ClickContainer$1 = styled.div(_templateObject2$2());\nconst Window$1 = styled.div(_templateObject3$2());\n\nconst MobilePause = () => {\n  const {\n    paused,\n    setPaused\n  } = useEnvironment();\n\n  const togglePause = () => setPaused(!paused);\n\n  return /*#__PURE__*/React.createElement(Container$3, {\n    paused: paused\n  }, /*#__PURE__*/React.createElement(ClickContainer$1, {\n    onClick: togglePause\n  }), !paused ? /*#__PURE__*/React.createElement(Window$1, null) : null);\n};\n\nfunction _templateObject$5() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  @font-face {\\n    font-family: \\\"MyriadPro\\\";\\n    src: url(\\\"https://d27rt3a60hh1lx.cloudfront.net/fonts/Myriad_Pro_Light.otf\\\");\\n  }\\n\\n  @font-face {\\n    font-family: \\\"Lomino\\\";\\n    src: url(\\\"https://d27rt3a60hh1lx.cloudfront.net/fonts/LominoUI_A_Rg.ttf\\\");\\n  }\\n\\n  html {\\n    position: fixed;\\n    height: 100%;\\n    overflow: hidden;\\n  }\\n\\n  body {\\n    margin: 0;\\n    width: 100vw;\\n    height: 100vh;\\n    user-select: none;\\n    overflow-y: auto;\\n    overflow-x: hidden;\\n    touch-action: pan-x pan-y;\\n    -webkit-overflow-scrolling: touch;\\n    font-family: \\\"MyriadPro\\\", sans-serif;\\n    font-size: 27px;\\n    @media screen and (max-width: 500px) {\\n      font-size: 24px;\\n    }\\n  }\\n\"]);\n\n  _templateObject$5 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nconst globalStyles = css(_templateObject$5());\n\nvar GlobalStyles = () => /*#__PURE__*/React.createElement(Global, {\n  styles: globalStyles\n});\n\nfunction _templateObject$6() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  overflow: hidden;\\n\\n  canvas {\\n    position: absolute;\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n    left: 0;\\n    outline: 0;\\n  }\\n\"]);\n\n  _templateObject$6 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nconst Container$4 = styled.div(_templateObject$6());\nconst defaultCanvasProps = {\n  shadowMap: true,\n  gl: {\n    alpha: false\n  },\n  camera: {\n    position: [0, 2, 0],\n    near: 0.01,\n    far: 100\n  }\n};\nconst defaultPhysicsProps = {\n  iterations: 20,\n  size: 10,\n  allowSleep: false,\n  defaultContactMaterial: {\n    friction: 0\n  }\n};\n/**\n *\n * Standard environment should be your first choice for an environment\n *\n * Player Type: First Person w/ WASD, Joystick controls\n * Physics: Enabled with default y=0 floor plane\n * Loading Screen: Spaces Edition\n * Pause Menu: Spaces Edition\n *\n */\n\nconst StandardEnvironment = props => {\n  const {\n    children,\n    canvasProps,\n    physicsProps,\n    player,\n    disableGround,\n    disableEffects\n  } = props;\n  const state = useEnvironmentState();\n  return /*#__PURE__*/React.createElement(BrowserChecker, null, /*#__PURE__*/React.createElement(GlobalStyles, null), /*#__PURE__*/React.createElement(Container$4, {\n    ref: state.containerRef\n  }, /*#__PURE__*/React.createElement(Canvas, _extends({}, defaultCanvasProps, canvasProps), /*#__PURE__*/React.createElement(Physics, _extends({}, defaultPhysicsProps, physicsProps), /*#__PURE__*/React.createElement(environmentStateContext.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(Player, {\n    initPos: player == null ? void 0 : player.pos,\n    initRot: player == null ? void 0 : player.rot\n  }), !disableGround && /*#__PURE__*/React.createElement(InfinitePlane, {\n    height: -0.001\n  }), !disableEffects && /*#__PURE__*/React.createElement(RealisticEffects, null), children))), /*#__PURE__*/React.createElement(environmentStateContext.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(LoadingScreen, null), /*#__PURE__*/React.createElement(DesktopPause, null), isMobile && /*#__PURE__*/React.createElement(MobilePause, null), /*#__PURE__*/React.createElement(Crosshair, null))));\n};\n\nfunction _templateObject4$1() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: fixed;\\n  bottom: 5vh;\\n  color: black;\\n  font-size: 1.5rem;\\n  cursor: pointer;\\n  :hover {\\n    text-decoration: underline;\\n  }\\n  transition: opacity 1s ease;\\n  transition-delay: 2s;\\n\\n  @media screen and (max-width: 650px) {\\n    font-size: 1rem;\\n  }\\n\"]);\n\n  _templateObject4$1 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3$3() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  padding: 0.5rem 0.5rem 0.5rem 0.5rem;\\n  background-image: linear-gradient(120deg, magenta, #5b328d);\\n  background-size: 120% 120%;\\n  background-position: top left;\\n  border-radius: 5px;\\n  transition: opacity 1s ease, background-position 0.3s linear;\\n  margin-bottom: 20px;\\n\\n  &:hover,\\n  &:active {\\n    background-position: bottom right;\\n  }\\n\"]);\n\n  _templateObject3$3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2$3() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  color: white;\\n  font-size: 4rem;\\n  font-weight: bold;\\n  outline: none;\\n  height: auto;\\n  width: auto;\\n  padding: 20px 20px 20px 20px;\\n  transition: opacity 1s ease;\\n  transition-delay: 0.5s;\\n  border-radius: 5px;\\n  background-color: transparent;\\n  cursor: pointer;\\n  border: none;\\n  font-family: \\\"Lato\\\", sans-serif;\\n\\n  @media screen and (max-width: 650px) {\\n    font-size: 2rem;\\n  }\\n\"]);\n\n  _templateObject2$3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject$7() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: 200;\\n  background: white;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n  font-family: \\\"Lato\\\", sans-serif;\\n\\n  transition: opacity 0.7s ease;\\n  \", \"\\n  \", \"\\n\"]);\n\n  _templateObject$7 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nconst Container$5 = styled$1.div(_templateObject$7(), props => props.finished && \"opacity: 0;\", props => props.finished && \"pointer-events: none;\");\nconst Begin = styled$1.button(_templateObject2$3());\nconst BeginBackground = styled$1.div(_templateObject3$3());\nconst AlternateStart = styled$1.div(_templateObject4$1());\n\nconst Transition = props => {\n  const {\n    start,\n    beginExperience,\n    selfExplore\n  } = props;\n  return /*#__PURE__*/React.createElement(Container$5, {\n    finished: start\n  }, /*#__PURE__*/React.createElement(BeginBackground, null, /*#__PURE__*/React.createElement(Begin, {\n    onClick: beginExperience\n  }, \"Experience\")), /*#__PURE__*/React.createElement(AlternateStart, {\n    onClick: selfExplore\n  }, \"Or, Explore on Your Own\"));\n};\n\nfunction _templateObject2$4() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  z-index: 2;\\n  perspective: 500px;\\n  -moz-perspective: 500px;\\n  -webkit-perspective: 500px;\\n\\n  & > i {\\n    display: block;\\n    position: absolute;\\n    width: 8px;\\n    height: 8px;\\n    border-radius: 8px;\\n    opacity: 0;\\n    background: rgba(255, 0, 255, 0.5);\\n    box-shadow: 0px 0px 10px white;\\n    animation-name: \", \";\\n    animation-duration: 3s;\\n    animation-iteration-count: infinite;\\n    animation-timing-function: ease-in-out;\\n  }\\n\\n  & i:nth-of-type(1) {\\n    transform: rotate(11.6129deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.04839s;\\n  }\\n\\n  i:nth-of-type(2) {\\n    transform: rotate(23.22581deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.09677s;\\n  }\\n\\n  i:nth-of-type(3) {\\n    transform: rotate(34.83871deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.14516s;\\n  }\\n\\n  i:nth-of-type(4) {\\n    transform: rotate(46.45161deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.19355s;\\n  }\\n\\n  i:nth-of-type(5) {\\n    transform: rotate(58.06452deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.24194s;\\n  }\\n\\n  i:nth-of-type(6) {\\n    transform: rotate(69.67742deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.29032s;\\n  }\\n\\n  i:nth-of-type(7) {\\n    transform: rotate(81.29032deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.33871s;\\n  }\\n\\n  i:nth-of-type(8) {\\n    transform: rotate(92.90323deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.3871s;\\n  }\\n\\n  i:nth-of-type(9) {\\n    transform: rotate(104.51613deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.43548s;\\n  }\\n\\n  i:nth-of-type(10) {\\n    transform: rotate(116.12903deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.48387s;\\n  }\\n\\n  i:nth-of-type(11) {\\n    transform: rotate(127.74194deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.53226s;\\n  }\\n\\n  i:nth-of-type(12) {\\n    transform: rotate(139.35484deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.58065s;\\n  }\\n\\n  i:nth-of-type(13) {\\n    transform: rotate(150.96774deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.62903s;\\n  }\\n\\n  i:nth-of-type(14) {\\n    transform: rotate(162.58065deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.67742s;\\n  }\\n\\n  i:nth-of-type(15) {\\n    transform: rotate(174.19355deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.72581s;\\n  }\\n\\n  i:nth-of-type(16) {\\n    transform: rotate(185.80645deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.77419s;\\n  }\\n\\n  i:nth-of-type(17) {\\n    transform: rotate(197.41935deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.82258s;\\n  }\\n\\n  i:nth-of-type(18) {\\n    transform: rotate(209.03226deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.87097s;\\n  }\\n\\n  i:nth-of-type(19) {\\n    transform: rotate(220.64516deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.91935s;\\n  }\\n\\n  i:nth-of-type(20) {\\n    transform: rotate(232.25806deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.96774s;\\n  }\\n\\n  i:nth-of-type(21) {\\n    transform: rotate(243.87097deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.01613s;\\n  }\\n\\n  i:nth-of-type(22) {\\n    transform: rotate(255.48387deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.06452s;\\n  }\\n\\n  i:nth-of-type(23) {\\n    transform: rotate(267.09677deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.1129s;\\n  }\\n\\n  i:nth-of-type(24) {\\n    transform: rotate(278.70968deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.16129s;\\n  }\\n\\n  i:nth-of-type(25) {\\n    transform: rotate(290.32258deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.20968s;\\n  }\\n\\n  i:nth-of-type(26) {\\n    transform: rotate(301.93548deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.25806s;\\n  }\\n\\n  i:nth-of-type(27) {\\n    transform: rotate(313.54839deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.30645s;\\n  }\\n\\n  i:nth-of-type(28) {\\n    transform: rotate(325.16129deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.35484s;\\n  }\\n\\n  i:nth-of-type(29) {\\n    transform: rotate(336.77419deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.40323s;\\n  }\\n\\n  i:nth-of-type(30) {\\n    transform: rotate(348.3871deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.45161s;\\n  }\\n\\n  i:nth-of-type(31) {\\n    transform: rotate(360deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.5s;\\n  }\\n\\n  i:nth-of-type(32) {\\n    transform: rotate(371.6129deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.54839s;\\n  }\\n\\n  i:nth-of-type(33) {\\n    transform: rotate(383.22581deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.59677s;\\n  }\\n\\n  i:nth-of-type(34) {\\n    transform: rotate(394.83871deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.64516s;\\n  }\\n\\n  i:nth-of-type(35) {\\n    transform: rotate(406.45161deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.69355s;\\n  }\\n\\n  i:nth-of-type(36) {\\n    transform: rotate(418.06452deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.74194s;\\n  }\\n\\n  i:nth-of-type(37) {\\n    transform: rotate(429.67742deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.79032s;\\n  }\\n\\n  i:nth-of-type(38) {\\n    transform: rotate(441.29032deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.83871s;\\n  }\\n\\n  i:nth-of-type(39) {\\n    transform: rotate(452.90323deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.8871s;\\n  }\\n\\n  i:nth-of-type(40) {\\n    transform: rotate(464.51613deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.93548s;\\n  }\\n\\n  i:nth-of-type(41) {\\n    transform: rotate(476.12903deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.98387s;\\n  }\\n\\n  i:nth-of-type(42) {\\n    transform: rotate(487.74194deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.03226s;\\n  }\\n\\n  i:nth-of-type(43) {\\n    transform: rotate(499.35484deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.08065s;\\n  }\\n\\n  i:nth-of-type(44) {\\n    transform: rotate(510.96774deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.12903s;\\n  }\\n\\n  i:nth-of-type(45) {\\n    transform: rotate(522.58065deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.17742s;\\n  }\\n\\n  i:nth-of-type(46) {\\n    transform: rotate(534.19355deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.22581s;\\n  }\\n\\n  i:nth-of-type(47) {\\n    transform: rotate(545.80645deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.27419s;\\n  }\\n\\n  i:nth-of-type(48) {\\n    transform: rotate(557.41935deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.32258s;\\n  }\\n\\n  i:nth-of-type(49) {\\n    transform: rotate(569.03226deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.37097s;\\n  }\\n\\n  i:nth-of-type(50) {\\n    transform: rotate(580.64516deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.41935s;\\n  }\\n\\n  i:nth-of-type(51) {\\n    transform: rotate(592.25806deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.46774s;\\n  }\\n\\n  i:nth-of-type(52) {\\n    transform: rotate(603.87097deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.51613s;\\n  }\\n\\n  i:nth-of-type(53) {\\n    transform: rotate(615.48387deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.56452s;\\n  }\\n\\n  i:nth-of-type(54) {\\n    transform: rotate(627.09677deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.6129s;\\n  }\\n\\n  i:nth-of-type(55) {\\n    transform: rotate(638.70968deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.66129s;\\n  }\\n\\n  i:nth-of-type(56) {\\n    transform: rotate(650.32258deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.70968s;\\n  }\\n\\n  i:nth-of-type(57) {\\n    transform: rotate(661.93548deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.75806s;\\n  }\\n\\n  i:nth-of-type(58) {\\n    transform: rotate(673.54839deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.80645s;\\n  }\\n\\n  i:nth-of-type(59) {\\n    transform: rotate(685.16129deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.85484s;\\n  }\\n\\n  i:nth-of-type(60) {\\n    transform: rotate(696.77419deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.90323s;\\n  }\\n\\n  i:nth-of-type(61) {\\n    transform: rotate(708.3871deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.95161s;\\n  }\\n\\n  i:nth-of-type(62) {\\n    transform: rotate(720deg) translate3d(80px, 0, 0);\\n    animation-delay: 3s;\\n  }\\n\\n  animation-delay: 1s;\\n  transition: transform 1.75s ease-out, opacity 1.75s ease-out;\\n  \", \";\\n  \", \";\\n\"]);\n\n  _templateObject2$4 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject$8() {\n  const data = _taggedTemplateLiteralLoose([\"\\n    from {\\n        opacity: 0.0;\\n    }\\n    to {\\n        opacity: 0.6;\\n        transform: translate3d(-4px, -4px, 570px);\\n    }\\n\"]);\n\n  _templateObject$8 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nconst spin = keyframes(_templateObject$8());\nconst Wrapper = styled.div(_templateObject2$4(), spin, props => props.finished && \"transform: translate3d(0, 0, 500px)\", props => props.finished && \"opacity: 0\");\n\nconst SpinningLoading = props => {\n  const {\n    progress\n  } = props;\n  const listElements = [...Array(62)].map((x, ind) => /*#__PURE__*/React.createElement(\"i\", {\n    key: ind\n  }));\n  return /*#__PURE__*/React.createElement(Wrapper, {\n    finished: progress === 100\n  }, listElements);\n};\n\nfunction _templateObject4$2() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  animation: \", \" 6s linear infinite;\\n\"]);\n\n  _templateObject4$2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3$4() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  transition: opacity 1s ease-out;\\n  transition-delay: 1.25s;\\n  \", \"\\n\"]);\n\n  _templateObject3$4 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2$5() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  0%, 100% {\\n    transform: rotate(-0.35deg) translateZ(66px);\\n     opacity: 0.9;\\n  }\\n  25%, 75% {\\n    transform: rotate(0.2deg) translateZ(-10px);\\n     opacity: 0.3;\\n  }\\n  50% {\\n    transform: rotate(0.5deg) translateZ(46px);\\n    opacity: 0.69;\\n  }\\n\"]);\n\n  _templateObject2$5 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject$9() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: 201;\\n  background: white;\\n\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n  font-family: \\\"Lato\\\", sans-serif;\\n  perspective: 500px;\\n\\n  transition: opacity 1.5s ease;\\n  transition-delay: 2.25s;\\n  \", \"\\n  \", \"\\n\"]);\n\n  _templateObject$9 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nconst Container$6 = styled.div(_templateObject$9(), props => props.finished && \"opacity: 0;\", props => props.finished && \"pointer-events: none;\");\nconst flickering = keyframes(_templateObject2$5());\nconst TextContainer = styled.div(_templateObject3$4(), props => props.finished && \"opacity: 0;\");\nconst Text$2 = styled.p(_templateObject4$2(), flickering);\n\nconst Loading = props => {\n  const {\n    progress\n  } = props;\n  return /*#__PURE__*/React.createElement(Container$6, {\n    finished: progress === 100\n  }, /*#__PURE__*/React.createElement(TextContainer, {\n    finished: progress === 1\n  }, /*#__PURE__*/React.createElement(Text$2, null, Math.floor(progress))), /*#__PURE__*/React.createElement(SpinningLoading, {\n    progress: progress\n  }));\n};\n\nconst PortalLoadingScreen = props => {\n  const {\n    setFixedPath\n  } = props;\n  const {\n    setPaused\n  } = useEnvironment();\n  const [start, setStart] = useState(false);\n\n  const beginExperience = () => {\n    setPaused(false);\n    setStart(true);\n  };\n\n  const selfExplore = () => {\n    setFixedPath(false);\n    beginExperience();\n  };\n\n  const progress = useControlledProgress();\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Loading, {\n    progress: progress\n  }), /*#__PURE__*/React.createElement(Transition, {\n    start: start,\n    beginExperience: beginExperience,\n    selfExplore: selfExplore\n  }));\n};\n\nconst fetchAccount = async username => {\n  let data;\n\n  try {\n    const response = await fetch(\"https://instagram.com/\" + username + \"/?__a=1\");\n    const result = await response.json();\n    data = result.graphql.user;\n  } catch (error) {\n    return error;\n  }\n\n  return data;\n};\n/**\n * Hook to fetch portal from backend gien an ID.\n *\n * If it finds an instagram username it will make network call to fetch instagram\n *\n * Will build assets from network fetch into a modified version of object\n * using the passed in builder function (optional)\n *\n * @param id\n * @param portalBuilder\n */\n\n\nconst usePortal = (id, portalBuilder) => {\n  const [result, setResult] = useState();\n  const [error, setError] = useState();\n  useEffect(() => {\n    const fetchData = async () => {\n      const localResult = {}; // fetch portal\n\n      try {\n        const response = await fetch(\"https://27m2mbw4h0.execute-api.us-west-1.amazonaws.com/fetch\", {\n          method: \"POST \",\n          body: JSON.stringify({\n            id\n          }),\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        const result = await response.json();\n        Object.assign(localResult, result);\n      } catch (err) {\n        var _err$data;\n\n        setError(((_err$data = err.data) == null ? void 0 : _err$data.message) || \"Could not find portal. Please contact us if the problem persists\");\n        return;\n      }\n\n      if (!localResult) {\n        setError(\"Could not find portal. Please contact us if the problem persists\");\n        return;\n      } // fetch instagram\n\n\n      const instagramUsername = localResult.instagramUsername;\n\n      if (instagramUsername) {\n        try {\n          const instagramResponse = await fetchAccount(instagramUsername);\n          localResult.instagram = instagramResponse;\n        } catch (err) {\n          console.error(\"Failed to fetch @\" + instagramUsername);\n        }\n      }\n\n      setResult(localResult);\n    };\n\n    if (!result && !error) {\n      fetchData();\n    }\n  }, [result, error]);\n  const builtResult = portalBuilder && result ? portalBuilder(result) : result;\n  return {\n    result: builtResult,\n    error\n  };\n};\n\nconst SHOW_PLAYER_HITBOX$1 = false;\n/**\n * Player represents a physics-enabled player in the environment, complete with a\n * control scheme and a physical representation that interacts with other physics-\n * enabled objects.\n *\n * There should only be one player per environment.\n *\n * @constructor\n */\n\nconst TrackPlayer = props => {\n  const {\n    initPos = new Vector3(0, 1, 0),\n    initRot = 0\n  } = props;\n  const {\n    camera\n  } = useThree();\n  const {\n    setPlayer\n  } = useEnvironment(); // physical body\n\n  const [bodyRef, bodyApi] = useSphere(() => ({\n    mass: 500,\n    position: initPos.toArray(),\n    args: 1,\n    fixedRotation: true\n  })); // producer\n\n  const position = useRef(new Vector3(0, 0, 0));\n  const velocity = useRef(new Vector3(0, 0, 0));\n  const lockControls = useRef(false);\n  const raycaster = useRef(new Raycaster(new Vector3(), new Vector3(), 0, 3)); // consumer\n\n  const quaternion = useRef(new Quaternion(0, 0, 0, 0)); // rad on y axis\n\n  const controls = useRef(); // setup player\n\n  useEffect(() => {\n    // store position and velocity\n    bodyApi.position.subscribe(p => {\n      position.current.set(p[0], p[1], p[2]);\n    });\n    bodyApi.velocity.subscribe(v => velocity.current.set(v[0], v[1], v[2]));\n    const xLook = initPos.x + 100 * Math.cos(initRot);\n    const zLook = initPos.z + 100 * Math.sin(initRot);\n    camera == null ? void 0 : camera.lookAt(xLook, initPos.y, zLook);\n\n    if (isMobile) {\n      window.addEventListener(\"click\", () => {\n        controls.current = new DeviceOrientationControls(camera);\n      });\n    }\n\n    setPlayer(createPlayerRef(bodyApi, position, velocity, lockControls, raycaster));\n  }, []); // update player every frame\n\n  useFrame(({\n    clock\n  }) => {\n    if (isMobile && controls.current) {\n      controls.current.update();\n    }\n\n    const dist = (22 + 50) / 2;\n    const x = dist * Math.cos(clock.getElapsedTime() / 10);\n    const z = dist * Math.sin(clock.getElapsedTime() / 10);\n    camera.position.set(x, 2, z);\n    return;\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !isMobile && /*#__PURE__*/React.createElement(MouseFPSCamera, {\n    quaternion: quaternion,\n    position: position\n  }), /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: bodyRef,\n    name: \"player\"\n  }, SHOW_PLAYER_HITBOX$1));\n};\n\nfunction _templateObject2$6() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  text-align: center;\\n  color: red;\\n  width: 100%;\\n  max-width: 500px;\\n  padding: 0 10%;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n\"]);\n\n  _templateObject2$6 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject$a() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  overflow: hidden;\\n\\n  canvas {\\n    position: absolute;\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n    left: 0;\\n    outline: 0;\\n  }\\n\"]);\n\n  _templateObject$a = function () {\n    return data;\n  };\n\n  return data;\n}\n\nconst Container$7 = styled.div(_templateObject$a());\nconst ErrorText = styled.p(_templateObject2$6());\nconst defaultCanvasProps$1 = {\n  shadowMap: true,\n  gl: {\n    alpha: false\n  },\n  camera: {\n    position: [0, 2, 0],\n    near: 0.01,\n    far: 200\n  }\n};\nconst defaultPhysicsProps$1 = {\n  iterations: 20,\n  size: 10,\n  allowSleep: false,\n  defaultContactMaterial: {\n    friction: 0\n  }\n};\n/**\n *\n * Provides an environment that loads a portal based on the url\n *\n * Player Type: First Person on a track or with WASD/Joystick\n * Physics: Enabled with default y=0 floor plane\n * Loading Screen: Spaces Portal Edition\n * Pause Menu: Spaces Edition\n *\n */\n\nconst PortalEnvironment = props => {\n  const {\n    children,\n    canvasProps,\n    physicsProps,\n    children2d,\n    portalId,\n    portalHandler\n  } = props;\n  const {\n    result,\n    error\n  } = usePortal(portalId, portalHandler);\n  const state = useEnvironmentState();\n  const localState = { ...state,\n    portal: result\n  };\n  const [fixedPath, setFixedPath] = useState(true);\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(ErrorText, null, error);\n  }\n\n  return /*#__PURE__*/React.createElement(BrowserChecker, null, /*#__PURE__*/React.createElement(GlobalStyles, null), /*#__PURE__*/React.createElement(Container$7, {\n    ref: state.containerRef\n  }, /*#__PURE__*/React.createElement(Canvas, _extends({}, defaultCanvasProps$1, canvasProps), /*#__PURE__*/React.createElement(Physics, _extends({}, defaultPhysicsProps$1, physicsProps), /*#__PURE__*/React.createElement(environmentStateContext.Provider, {\n    value: localState\n  }, fixedPath ? /*#__PURE__*/React.createElement(TrackPlayer, null) : /*#__PURE__*/React.createElement(TrackPlayer, {\n    initPos: new Vector3(0, 2, 53)\n  }), children))), /*#__PURE__*/React.createElement(environmentStateContext.Provider, {\n    value: localState\n  }, children2d, /*#__PURE__*/React.createElement(PortalLoadingScreen, {\n    setFixedPath: setFixedPath\n  }), /*#__PURE__*/React.createElement(DesktopPause, null), isMobile && /*#__PURE__*/React.createElement(MobilePause, null))));\n};\n\nexport { Arrow, Audio, Background, Floating, HDRI, Image, InfinitePlane, Interactable, Logo, PortalEnvironment, RealisticEffects, Shop, StandardEnvironment, Text, Video, environmentStateContext, useControlledProgress, useConvexCollision, useEnvironment, useEnvironmentState, useShopify, useTrimeshCollision };\nimport React from \"react\";","map":{"version":3,"sources":["/Users/benjaminha/Documents/Connect-Tech/meditation-world/node_modules/spacesvr/main.js"],"names":["useLoader","useThree","useFrame","useUpdate","extend","Canvas","TextureLoader","Vector3","AudioListener","PositionalAudio","Color","PMREMGenerator","UnsignedByteType","Vector2","MeshStandardMaterial","DoubleSide","Geometry","FontLoader","VideoTexture","LinearFilter","RGBFormat","ClampToEdgeWrapping","Euler","Raycaster","Quaternion","createContext","useContext","useState","useRef","useCallback","useEffect","useMemo","Suspense","useProgress","useGLTF","PositionalAudioHelper","RGBELoader","usePlane","useTrimesh","useConvexPolyhedron","useSphere","Physics","ShopifyBuy","_extends","_taggedTemplateLiteralLoose","keyframes","css","Global","styled","isMobile","nipplejs","PointerLockControls","EffectComposer","RenderPass","GlitchPass","ShaderPass","GammaCorrectionShader","BloomPass","FXAAShader","styled$1","fetch","DeviceOrientationControls","IMAGE_SRC","IMAGE_SRC_DARK","Arrow","props","dark","restProps","texture","React","createElement","scale","attach","args","map","alphaTest","transparent","normalMap","environmentStateContext","useEnvironment","useEnvironmentState","paused","setPausedState","overlay","setOverlayState","container","events","player","setPaused","p","o","current","ev","name","callback","apply","setPlayer","addEvent","event","push","context","containerRef","useControlledProgress","TIMEOUT","progress","total","startTime","Date","controlledProgress","newTime","timeElapsed","getTime","diff","Math","min","counter","setCounter","skip","setSkip","setTimeout","floor","Audio","url","position","dCone","rollOff","volume","helper","audioRef","speaker","camera","scene","listener","audio","document","src","autoplay","preload","crossOrigin","loop","appendChild","pause","remove","add","setMediaElementSource","copy","setDirectionalCone","x","y","z","setRolloffFactor","setVolume","play","Fragment","Background","color","setup","setSetup","background","HDRI","gl","pmremGenerator","compileEquirectangularShader","loader","setDataType","load","envMap","fromEquirectangular","environment","dispose","frameWidth","frameDepth","borderThickness","borderDepth","meshOffset","Image","sizeScale","ratio","framed","doubleSided","material","passedMaterial","group","image","normalizedRatio","normalize","width","height","roughness","metalness","ref","castShadow","side","undefined","InfinitePlane","size","visible","rotation","PI","type","SPEED","FILE_URL","Logo","rotating","floating","sphereGroup","nodes","materials","clock","getElapsedTime","sin","fallback","Sphere","geometry","useTrimeshCollision","vertices","attributes","array","indices","index","hitbox","useConvexCollision","geo","fromBufferGeometry","useShopify","domain","token","client","buildClient","storefrontAccessToken","products","setProducts","checkout","setCheckout","checkoutOpen","setCheckoutOpen","product","fetchAll","then","shopifyProducts","create","shopifyCheckout","Interactable","children","onClick","onHover","onUnHover","raycaster","hovered","setHovered","intersections","intersectObject","length","checkClick","addEventListener","removeEventListener","Floating","speed","seed","random","Shop","localProducts","itemSize","itemRatio","spaceBetween","productImages","positionOffset","offset","productImage","window","location","href","key","cos","shopifyState","forEach","images","FONT_FILE","Text","text","vAlign","hAlign","bevel","font","fontFile","config","curveSegments","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","mesh","self","computeBoundingBox","boundingBox","getSize","reflectivity","frameWidth$1","frameDepth$1","borderThickness$1","borderDepth$1","meshOffset$1","Video","muted","videoRef","textureRef","texReady","setTexReady","_videoRef$current","currentTime","video","source","playsInline","style","opacity","pointerEvents","visibility","minFilter","magFilter","format","matrixAutoUpdate","wrapS","wrapT","disconnect","setRefDistance","set","_templateObject3","data","_templateObject2","_templateObject","Container","div","IMAGE_SRC$1","float","Image$1","INVALID_KEYWORDS","BrowserChecker","valid","setValid","ua","navigator","userAgent","vendor","filter","val","includes","_templateObject$1","Element","Crosshair","DefaultTouch","pos","id","DRAG_SENSITIVITY","TouchFPSCamera","quaternion","touchStartPos","originEuler","_camera$position","pX","pY","pZ","getNewEuler","dragX","dragY","newEuler","clone","moveX","moveY","setFromQuaternion","max","tappedNipple","ele","touches","target","classList","contains","getCurrentTouch","len","i","identifier","onTouchStart","touchIndex","clientX","clientY","onTouchMove","touch","setFromEuler","onTouchEnd","changedTouches","lookAt","NippleMovement","direction","nippleContainer","nipple","left","bottom","maxWidth","zIndex","zone","mode","top","restOpacity","on","evt","vector","destroy","MobileControls","KeyboardMovement","pressedKeys","calcDirection","press","yAxis","Number","xAxis","onKeyDown","onKeyUp","MouseFPSCamera","controls","_controls$current","isLocked","applyQuaternion","multiply","onLock","onUnlock","lockCamera","_controls$current2","lock","unlockCamera","_controls$current3","unlock","pausedVal","overlayVal","_controls$current5","_controls$current6","_controls$current4","_controls$current7","_controls$current8","domElement","DesktopControls","createPlayerRef","bodyApi","velocity","lockControls","posVec","vec","get","velVec","playerRef","VELOCITY_FACTOR","SHOW_PLAYER_HITBOX","Player","initPos","initRot","bodyRef","mass","toArray","fixedRotation","prevTime","performance","now","subscribe","v","xLook","zLook","time","ray","origin","delta","inputVelocity","moveQuaternion","_templateObject$2","Container$1","finished","LoadingScreen","landing","RealisticEffects","gammaCorrection","fxaaPass","pixelRatio","devicePixelRatio","uniforms","value","innerWidth","innerHeight","composer","_composer$current","setSize","_composer$current2","_composer$current3","renderToScreen","addPass","_composer$current4","render","attachArray","_templateObject9","_templateObject8","_templateObject7","_templateObject6","_templateObject5","_templateObject4","_templateObject3$1","_templateObject2$1","_templateObject$3","NEXT_PUBLIC_VERSION","process","env","Container$2","ClickContainer","Window","Continue","Version","a","Instagram","Header","Title","Text$1","DesktopPause","closeOverlay","open","_templateObject3$2","_templateObject2$2","_templateObject$4","Container$3","ClickContainer$1","Window$1","MobilePause","togglePause","_templateObject$5","globalStyles","GlobalStyles","styles","_templateObject$6","Container$4","defaultCanvasProps","shadowMap","alpha","near","far","defaultPhysicsProps","iterations","allowSleep","defaultContactMaterial","friction","StandardEnvironment","canvasProps","physicsProps","disableGround","disableEffects","state","Provider","rot","_templateObject4$1","_templateObject3$3","_templateObject2$3","_templateObject$7","Container$5","Begin","button","BeginBackground","AlternateStart","Transition","start","beginExperience","selfExplore","_templateObject2$4","_templateObject$8","spin","Wrapper","SpinningLoading","listElements","Array","ind","_templateObject4$2","_templateObject3$4","_templateObject2$5","_templateObject$9","Container$6","flickering","TextContainer","Text$2","Loading","PortalLoadingScreen","setFixedPath","setStart","fetchAccount","username","response","result","json","graphql","user","error","usePortal","portalBuilder","setResult","setError","fetchData","localResult","method","body","JSON","stringify","headers","Object","assign","err","_err$data","message","instagramUsername","instagramResponse","instagram","console","builtResult","SHOW_PLAYER_HITBOX$1","TrackPlayer","update","dist","_templateObject2$6","_templateObject$a","Container$7","ErrorText","defaultCanvasProps$1","defaultPhysicsProps$1","PortalEnvironment","children2d","portalId","portalHandler","localState","portal","fixedPath"],"mappings":"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","sourcesContent":["import { useLoader, useThree, useFrame, useUpdate, extend, Canvas } from 'react-three-fiber';\nimport { TextureLoader, Vector3, AudioListener, PositionalAudio, Color, PMREMGenerator, UnsignedByteType, Vector2, MeshStandardMaterial, DoubleSide, Geometry, FontLoader, VideoTexture, LinearFilter, RGBFormat, ClampToEdgeWrapping, Euler, Raycaster, Quaternion } from 'three';\nimport { createContext, useContext, useState, useRef, useCallback, useEffect, useMemo, Suspense } from 'react';\nimport { useProgress, useGLTF } from '@react-three/drei';\nimport { PositionalAudioHelper } from 'three/examples/jsm/helpers/PositionalAudioHelper';\nimport { RGBELoader } from 'three/examples/jsm/loaders/RGBELoader';\nimport { usePlane, useTrimesh, useConvexPolyhedron, useSphere, Physics } from '@react-three/cannon';\nimport ShopifyBuy from 'shopify-buy';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _taggedTemplateLiteralLoose from '@babel/runtime/helpers/esm/taggedTemplateLiteralLoose';\nimport { keyframes, css, Global } from '@emotion/core';\nimport styled from '@emotion/styled';\nimport { isMobile } from 'react-device-detect';\nimport nipplejs from 'nipplejs';\nimport { PointerLockControls } from 'three/examples/jsm/controls/PointerLockControls';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\nimport { GlitchPass } from 'three/examples/jsm/postprocessing/GlitchPass';\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass';\nimport { GammaCorrectionShader } from 'three/examples/jsm/shaders/GammaCorrectionShader';\nimport { BloomPass } from 'three/examples/jsm/postprocessing/BloomPass';\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader';\nimport styled$1 from '@emotion/styled/';\nimport fetch from 'node-fetch';\nimport { DeviceOrientationControls } from 'three/examples/jsm/controls/DeviceOrientationControls';\n\nconst IMAGE_SRC = \"https://d27rt3a60hh1lx.cloudfront.net/images/whiteArrow.png\";\nconst IMAGE_SRC_DARK = \"https://d27rt3a60hh1lx.cloudfront.net/images/blackArrow.png\";\nconst Arrow = props => {\n  const {\n    dark,\n    ...restProps\n  } = props;\n  const texture = useLoader(TextureLoader, dark ? IMAGE_SRC_DARK : IMAGE_SRC);\n  return /*#__PURE__*/React.createElement(\"group\", restProps, /*#__PURE__*/React.createElement(\"mesh\", {\n    scale: [0.004, 0.004, 0.004]\n  }, /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [98, 51]\n  }), /*#__PURE__*/React.createElement(\"meshStandardMaterial\", {\n    map: texture,\n    attach: \"material\",\n    alphaTest: 0.5,\n    transparent: true,\n    normalMap: texture\n  })));\n};\n\nconst environmentStateContext = /*#__PURE__*/createContext({});\nfunction useEnvironment() {\n  return useContext(environmentStateContext);\n}\nfunction useEnvironmentState() {\n  const [paused, setPausedState] = useState(true);\n  const [overlay, setOverlayState] = useState(null);\n  const container = useRef(null);\n  const events = useRef([]);\n  const player = useRef({});\n  const setPaused = useCallback((p, o) => {\n    setPausedState(p);\n\n    if (!p) {\n      // if unpausing, set paused overlay to undefined by default\n      setOverlayState(o || null);\n    }\n\n    if (p && o) {\n      // if pausing, only set closed overlay if passed ins\n      setOverlayState(o);\n    }\n\n    events.current.map(ev => {\n      if (ev.name === \"paused\") {\n        ev.callback.apply(null, [p, o]);\n      }\n    });\n  }, [events]);\n\n  const setPlayer = p => {\n    player.current = p;\n  };\n\n  const addEvent = useCallback((name, callback) => {\n    const event = {\n      name,\n      callback\n    };\n    events.current.push(event);\n  }, []);\n  const context = {\n    paused,\n    overlay,\n    player: player.current,\n    containerRef: container,\n    container: container.current,\n    events: events.current,\n    setPaused,\n    setPlayer,\n    addEvent\n  };\n  return context;\n}\nconst useControlledProgress = () => {\n  const TIMEOUT = 750;\n  const {\n    progress,\n    total\n  } = useProgress();\n  const startTime = useRef(new Date());\n  const controlledProgress = useRef(0);\n  useEffect(() => {\n    const newTime = new Date();\n    const timeElapsed = newTime.getTime() - startTime.current.getTime();\n    const diff = Math.min(progress - controlledProgress.current, timeElapsed < TIMEOUT ? 99 : 100);\n\n    if (diff > 0) {\n      controlledProgress.current = progress;\n    }\n  }, [progress]); // wait TIMEOUT (ms) to check if any objects are waiting to be loaded\n\n  const [counter, setCounter] = useState(0);\n  const [skip, setSkip] = useState(false);\n  useEffect(() => {\n    if (total > 0) {\n      return;\n    } else if (counter > 0) {\n      setSkip(true);\n    } else {\n      setTimeout(() => setCounter(counter + 1), TIMEOUT);\n    }\n  }, [counter]);\n  return skip ? 100 : Math.floor(controlledProgress.current);\n};\n\nconst Audio = props => {\n  const {\n    url,\n    position = new Vector3(0, 0, 0),\n    dCone,\n    rollOff = 1,\n    volume = 7,\n    helper\n  } = props;\n  const {\n    paused,\n    container\n  } = useEnvironment();\n  const audioRef = useRef();\n  const speaker = useRef();\n  const {\n    camera,\n    scene\n  } = useThree();\n  const listener = useRef();\n  useEffect(() => {\n    if (container && !audioRef.current) {\n      const audio = document.createElement(\"audio\");\n      audio.src = url;\n      audio.autoplay = false;\n      audio.preload = \"auto\";\n      audio.crossOrigin = \"anonymous\";\n      audio.loop = true;\n      container == null ? void 0 : container.appendChild(audio);\n      audioRef.current = audio;\n      return () => {\n        audio.pause();\n\n        if (listener.current) {\n          camera.remove(listener.current);\n        }\n      };\n    }\n  }, [container, audioRef.current]); // audio\n\n  useEffect(() => {\n    if (!paused && camera && audioRef.current && !speaker.current) {\n      listener.current = new AudioListener();\n      camera.add(listener.current);\n      speaker.current = new PositionalAudio(listener.current);\n      speaker.current.setMediaElementSource(audioRef.current);\n      speaker.current.position.copy(position);\n\n      if (dCone) {\n        speaker.current.setDirectionalCone(dCone.x, dCone.y, dCone.z);\n      }\n\n      speaker.current.setRolloffFactor(rollOff);\n      speaker.current.setVolume(volume);\n\n      if (helper) {\n        const helper = new PositionalAudioHelper(speaker.current);\n        speaker.current.add(helper);\n      }\n\n      scene.add(speaker.current);\n    }\n  }, [audioRef.current, camera, speaker.current, listener.current, paused]);\n  useEffect(() => {\n    if (!paused && audioRef.current && audioRef.current.paused) {\n      audioRef.current.play();\n    }\n  }, [paused, audioRef.current]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null);\n};\n\nconst Background = props => {\n  const {\n    color\n  } = props;\n  const {\n    scene\n  } = useThree();\n  const [setup, setSetup] = useState(false);\n  useEffect(() => {\n    if (scene && !setup) {\n      scene.background = new Color(color);\n      setSetup(true);\n    }\n  }, [scene, setup]);\n  return null;\n};\n\nconst HDRI = props => {\n  const {\n    src\n  } = props;\n  const {\n    gl,\n    scene\n  } = useThree(); // pmrem generator for hdri loading\n\n  const pmremGenerator = new PMREMGenerator(gl);\n  pmremGenerator.compileEquirectangularShader(); // actual file loader\n\n  const loader = new RGBELoader();\n  loader.setDataType(UnsignedByteType);\n  useEffect(() => {\n    loader.load(src, texture => {\n      const envMap = pmremGenerator.fromEquirectangular(texture).texture; // sent envmap onto scene env and background\n\n      scene.environment = envMap;\n      scene.background = envMap;\n      texture.dispose();\n      pmremGenerator.dispose();\n    });\n  }, [scene, loader, pmremGenerator]);\n  return null;\n};\n\nconst frameWidth = 0.3;\nconst frameDepth = 0.1;\nconst borderThickness = 0.2;\nconst borderDepth = 0.2;\nconst meshOffset = 0.0005;\nconst Image = props => {\n  const {\n    src,\n    sizeScale,\n    ratio,\n    framed,\n    doubleSided,\n    material: passedMaterial,\n    color = 0x111111\n  } = props;\n  const texture = useLoader(TextureLoader, src);\n  const group = useRef();\n  const image = useRef(); // sizing\n\n  const normalizedRatio = new Vector2(ratio[0], ratio[1]).normalize();\n  const width = normalizedRatio.x * sizeScale;\n  const height = normalizedRatio.y * sizeScale;\n  const material = useMemo(() => passedMaterial || new MeshStandardMaterial({\n    color: color,\n    roughness: 0.8,\n    metalness: 0.05\n  }), []);\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, /*#__PURE__*/React.createElement(\"mesh\", {\n    castShadow: true,\n    ref: image\n  }, /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width, height]\n  }), /*#__PURE__*/React.createElement(\"meshStandardMaterial\", {\n    attach: \"material\",\n    map: texture,\n    side: doubleSided ? DoubleSide : undefined\n  })), framed && /*#__PURE__*/React.createElement(React.Fragment, null, !doubleSided && /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-z\": [-0.1 - meshOffset],\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width + frameWidth, height + frameWidth, frameDepth]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-y\": height / 2 + frameWidth / 2 - borderThickness / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width + frameWidth, borderThickness, borderDepth]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-y\": -height / 2 - frameWidth / 2 + borderThickness / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width + frameWidth, borderThickness, borderDepth]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-x\": -width / 2 - frameWidth / 2 + borderThickness / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [borderThickness, height + frameWidth, borderDepth]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-x\": width / 2 + frameWidth / 2 - borderThickness / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [borderThickness, height + frameWidth, borderDepth]\n  })))));\n};\n\nconst InfinitePlane = props => {\n  const {\n    height,\n    size = [100, 100],\n    visible\n  } = props;\n  const [ref] = usePlane(() => ({\n    rotation: [-Math.PI / 2, 0, 0],\n    position: [0, height, 0],\n    args: size,\n    type: \"Static\"\n  }));\n  return /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: ref\n  }, visible && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: size\n  }), /*#__PURE__*/React.createElement(\"meshPhongMaterial\", {\n    attach: \"material\",\n    color: \"#660000\"\n  })));\n};\n\nconst SPEED = 0.2;\nconst FILE_URL = \"https://d27rt3a60hh1lx.cloudfront.net/models/SpacesSphere1/SpacesSphere1.glb\";\nconst Logo = props => {\n  const {\n    rotating,\n    floating,\n    ...restProps\n  } = props;\n  const group = useRef();\n  const sphereGroup = useRef();\n  const {\n    nodes,\n    materials\n  } = useGLTF(FILE_URL);\n  useFrame(({\n    clock\n  }) => {\n    if (group.current && rotating) {\n      group.current.rotation.y = clock.getElapsedTime() * SPEED;\n    }\n\n    if (group.current && floating) {\n      group.current.position.y = 0.1 * 2 * Math.sin(clock.getElapsedTime() * SPEED * 2);\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", restProps, /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: null\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    ref: sphereGroup,\n    scale: [100, 100, 100],\n    dispose: null\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    position: [0, 0, 0]\n  }, /*#__PURE__*/React.createElement(\"mesh\", {\n    material: materials.Sphere,\n    geometry: nodes.Sphere.geometry,\n    castShadow: true\n  }))))));\n};\nuseGLTF.preload(FILE_URL);\n\nconst useTrimeshCollision = geometry => {\n  const vertices = geometry.attributes.position.array; // @ts-ignore\n\n  const indices = geometry.index.array; // @ts-ignore\n\n  const [hitbox] = useTrimesh(() => ({\n    type: \"Static\",\n    args: [vertices, indices]\n  }));\n  return hitbox;\n};\nconst useConvexCollision = geometry => {\n  const geo = useMemo(() => new Geometry().fromBufferGeometry(geometry), [geometry]);\n  const [hitbox] = useConvexPolyhedron(() => ({\n    type: \"Static\",\n    args: geo\n  }));\n  return hitbox;\n};\n\nconst useShopify = props => {\n  const {\n    domain,\n    token\n  } = props;\n  const client = ShopifyBuy.buildClient({\n    domain: domain,\n    storefrontAccessToken: token\n  });\n  const [products, setProducts] = useState();\n  const [checkout, setCheckout] = useState();\n  const [checkoutOpen, setCheckoutOpen] = useState(\"false\");\n  useEffect(() => {\n    if (!products && !checkout) {\n      client.product.fetchAll() // @ts-ignore\n      .then(shopifyProducts => setProducts(shopifyProducts));\n      client.checkout.create() // @ts-ignore\n      .then(shopifyCheckout => setCheckout(shopifyCheckout));\n    }\n  }, [products, checkout]);\n  return {\n    client,\n    products,\n    checkout,\n    setCheckout,\n    checkoutOpen,\n    setCheckoutOpen\n  };\n};\n\n/**\n *\n * Interactible adds on click and hover methods to any group of Object3D's\n *\n * @param props\n * @constructor\n */\nconst Interactable = props => {\n  const {\n    children,\n    onClick,\n    onHover,\n    onUnHover\n  } = props;\n  const {\n    player\n  } = useEnvironment();\n  const {\n    raycaster\n  } = player;\n  const group = useRef();\n  const [hovered, setHovered] = useState(false);\n  useFrame(() => {\n    if (group.current && raycaster) {\n      const intersections = raycaster.intersectObject(group.current, true);\n\n      if (intersections && intersections.length > 0) {\n        if (!hovered) {\n          setHovered(true);\n\n          if (onHover) {\n            onHover();\n          }\n        }\n      } else if (hovered) {\n        setHovered(false);\n\n        if (onUnHover) {\n          onUnHover();\n        }\n      }\n    }\n  });\n  useEffect(() => {\n    const checkClick = () => {\n      if (hovered && onClick) {\n        onClick();\n      }\n    };\n\n    document.addEventListener(\"click\", checkClick);\n    return () => {\n      document.removeEventListener(\"click\", checkClick);\n    };\n  }, [hovered, onClick]);\n  return /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, children);\n};\n\nconst Floating = props => {\n  const {\n    children,\n    height = 0.2,\n    speed = 1\n  } = props;\n  const group = useRef();\n  const seed = useRef(Math.random());\n  useFrame(({\n    clock\n  }) => {\n    if (group.current) {\n      group.current.position.y = height * Math.sin(clock.getElapsedTime() * speed * 0.4 + seed.current * 10000);\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, children);\n};\n\nconst Shop = props => {\n  const {\n    domain,\n    token,\n    localProducts,\n    itemSize = 4,\n    itemRatio = [1, 1],\n    spaceBetween = 9,\n    position = [-9, 4, 0],\n    rotation = [0, Math.PI / 9, 0]\n  } = props;\n  const productImages = [];\n  let positionOffset = 0;\n  let offset = 0;\n\n  if (localProducts) {\n    for (const product of localProducts) {\n      const productImage = /*#__PURE__*/React.createElement(Interactable, {\n        onClick: () => window.location.href = product[1],\n        key: product[0]\n      }, /*#__PURE__*/React.createElement(Image, {\n        src: product[0],\n        ratio: itemRatio,\n        sizeScale: itemSize,\n        position: [Math.cos(offset) * 19 + spaceBetween, 2, Math.sin(offset) * 19],\n        rotation: [0, Math.PI / 2 - offset + Math.PI, 0],\n        framed: true\n      }));\n      productImages.push(productImage);\n      offset += 2 * Math.PI / localProducts.length;\n      positionOffset++;\n    }\n\n    return /*#__PURE__*/React.createElement(\"group\", {\n      position: position,\n      rotation: rotation\n    }, productImages);\n  }\n\n  let shopifyState;\n\n  if (domain && token) {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    shopifyState = useShopify({\n      domain: domain,\n      token: token\n    });\n  } // @ts-ignore\n\n\n  const {\n    products\n  } = shopifyState;\n\n  if (products) {\n    // @ts-ignore\n    products.forEach(product => {\n      if (product.images[0]) {\n        const src = product.images[0].src;\n        const productImage = /*#__PURE__*/React.createElement(Image, {\n          src: src,\n          ratio: itemRatio,\n          sizeScale: itemSize,\n          position: [spaceBetween * positionOffset, 2, 0],\n          rotation: [0, Math.PI, 0],\n          framed: true\n        });\n        productImages.push(productImage);\n        positionOffset++;\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"group\", {\n    position: position,\n    rotation: rotation\n  }, productImages);\n};\n\nconst FONT_FILE = \"fonts/Couture_Bold.json\";\nconst Text = props => {\n  const {\n    text,\n    vAlign = \"center\",\n    hAlign = \"center\",\n    size = 1,\n    bevel = false,\n    color = \"#000000\",\n    font: fontFile,\n    material,\n    ...restProps\n  } = props;\n  const font = useLoader(FontLoader, fontFile || FONT_FILE);\n  const config = useMemo(() => ({\n    font,\n    size,\n    height: 0.75 * size,\n    curveSegments: 32,\n    bevelEnabled: bevel,\n    bevelThickness: 0.15 * size,\n    bevelSize: 0.0625 * size,\n    bevelOffset: 0,\n    bevelSegments: 8\n  }), [font]);\n  const mesh = useUpdate(self => {\n    const size = new Vector3();\n    self.geometry.computeBoundingBox();\n    self.geometry.boundingBox.getSize(size);\n    self.position.x = hAlign === \"center\" ? -size.x / 2 : hAlign === \"right\" ? 0 : -size.x;\n    self.position.y = vAlign === \"center\" ? -size.y / 2 : vAlign === \"top\" ? 0 : -size.y;\n  }, [text]);\n  return /*#__PURE__*/React.createElement(\"group\", _extends({}, restProps, {\n    scale: [0.1 * size, 0.1 * size, 0.1]\n  }), /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: mesh,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"textGeometry\", {\n    attach: \"geometry\",\n    args: [text, config]\n  }), !material && /*#__PURE__*/React.createElement(\"meshPhongMaterial\", {\n    attach: \"material\",\n    color: color,\n    reflectivity: 30\n  })));\n};\n\nconst frameWidth$1 = 0.3;\nconst frameDepth$1 = 0.1;\nconst borderThickness$1 = 0.2;\nconst borderDepth$1 = 0.2;\nconst meshOffset$1 = 0.0005;\nconst Video = props => {\n  const {\n    src,\n    sizeScale,\n    ratio,\n    framed,\n    position,\n    rotation,\n    muted,\n    doubleSided\n  } = props;\n  const {\n    camera,\n    scene\n  } = useThree();\n  const {\n    container,\n    paused\n  } = useEnvironment();\n  const group = useRef(); // video state\n\n  const videoRef = useRef();\n  const textureRef = useRef();\n  const [texReady, setTexReady] = useState(false); // audio refs\n\n  const listener = useRef();\n  const speaker = useRef();\n  useFrame(() => {\n    var _videoRef$current;\n\n    if (!texReady && (videoRef == null ? void 0 : videoRef.current) && (videoRef == null ? void 0 : (_videoRef$current = videoRef.current) == null ? void 0 : _videoRef$current.currentTime) > 0) {\n      setTexReady(true);\n    }\n  });\n  const material = useMemo(() => new MeshStandardMaterial({\n    color: 0x111111,\n    roughness: 0.8,\n    metalness: 0.05\n  }), []); // sizing\n\n  const normalizedRatio = new Vector2(ratio[0], ratio[1]).normalize();\n  const width = normalizedRatio.x * sizeScale;\n  const height = normalizedRatio.y * sizeScale; // video textures use effect\n\n  useEffect(() => {\n    if (container && !videoRef.current) {\n      // build video dom element\n      const video = document.createElement(\"video\");\n      const source = document.createElement(\"source\");\n      source.src = src;\n      video.loop = true; //@ts-ignore\n\n      video.playsInline = true;\n      video.crossOrigin = \"anonymous\";\n      video.preload = \"auto\";\n      video.autoplay = false;\n      video.muted = muted || false;\n      video.style.position = \"absolute\";\n      video.style.opacity = \"0\";\n      video.style.pointerEvents = \"none\";\n      video.style.visibility = \"hidden\"; // add to parent container\n\n      container.appendChild(video);\n      video.appendChild(source); // create video texture\n\n      const texture = new VideoTexture(video);\n      texture.minFilter = LinearFilter;\n      texture.magFilter = LinearFilter;\n      texture.format = RGBFormat;\n      texture.matrixAutoUpdate = false;\n      texture.wrapS = ClampToEdgeWrapping;\n      texture.wrapT = ClampToEdgeWrapping;\n      videoRef.current = video;\n      textureRef.current = texture;\n      return () => {\n        video.pause();\n        video.remove();\n        videoRef.current = undefined;\n        texture.dispose();\n        textureRef.current = undefined;\n\n        if (speaker.current) {\n          speaker.current.disconnect();\n          speaker.current = undefined;\n        }\n\n        if (listener.current) {\n          camera.remove(listener.current);\n        }\n\n        setTexReady(false);\n      };\n    }\n  }, [container, videoRef == null ? void 0 : videoRef.current]); // audio useeffect\n\n  useEffect(() => {\n    if (!muted && !paused && camera && videoRef.current && !speaker.current) {\n      listener.current = new AudioListener();\n      camera.add(listener.current);\n      speaker.current = new PositionalAudio(listener.current);\n      speaker.current.setMediaElementSource(videoRef.current);\n      speaker.current.setRefDistance(0.75);\n      speaker.current.setRolloffFactor(1);\n      speaker.current.setVolume(1);\n      speaker.current.setDirectionalCone(180, 230, 0.1);\n\n      if (position) {\n        // @ts-ignore due to bad types, it's an array though\n        speaker.current.position.set(position[0], position[1], position[2]);\n      }\n\n      if (rotation) {\n        // @ts-ignore due to bad types, it's an array though\n        speaker.current.rotation.set(rotation[0], rotation[1], rotation[2]);\n      }\n\n      scene.add(speaker.current);\n    }\n  }, [videoRef.current, camera, speaker.current, listener.current, paused]); // play video if player closes menu\n\n  useEffect(() => {\n    if (!paused && videoRef.current && videoRef.current.paused) {\n      videoRef.current.play();\n    }\n  }, [paused]);\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, texReady && /*#__PURE__*/React.createElement(\"mesh\", null, /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width, height]\n  }), /*#__PURE__*/React.createElement(\"meshStandardMaterial\", {\n    attach: \"material\",\n    map: textureRef.current,\n    side: doubleSided ? DoubleSide : undefined\n  })), framed && /*#__PURE__*/React.createElement(React.Fragment, null, !doubleSided && /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-z\": [-0.1 - meshOffset$1],\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width + frameWidth$1, height + frameWidth$1, frameDepth$1]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-y\": height / 2 + frameWidth$1 / 2 - borderThickness$1 / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width + frameWidth$1, borderThickness$1, borderDepth$1]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-y\": -height / 2 - frameWidth$1 / 2 + borderThickness$1 / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [width + frameWidth$1, borderThickness$1, borderDepth$1]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-x\": -width / 2 - frameWidth$1 / 2 + borderThickness$1 / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [borderThickness$1, height + frameWidth$1, borderDepth$1]\n  })), /*#__PURE__*/React.createElement(\"mesh\", {\n    \"position-x\": width / 2 + frameWidth$1 / 2 - borderThickness$1 / 2,\n    material: material\n  }, /*#__PURE__*/React.createElement(\"boxBufferGeometry\", {\n    attach: \"geometry\",\n    args: [borderThickness$1, height + frameWidth$1, borderDepth$1]\n  })))));\n};\n\nfunction _templateObject3() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  width: 90%;\\n  height: 90%;\\n  max-width: 500px;\\n  max-height: 500px;\\n  background-image: url(\", \");\\n  background-size: contain;\\n  background-position: center;\\n  background-repeat: no-repeat;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  opacity: 0.4;\\n  animation: \", \" 7s ease-in-out infinite;\\n\"]);\n\n  _templateObject3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteralLoose([\"\\n        0% {\\n            transform: translate(-50%, -50%) translateY(0px)\\n    }\\n    \\n        50% {\\n            transform: translate(-50%, -50%) translateY(-15px)\\n    }\\n    \\n        100% {\\n            transform: translate(-50%, -50%) translateY(0px)\\n    }\\n\"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  z-index: 9999;\\n  background: white;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n  text-align: center;\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\nconst Container = styled.div(_templateObject());\nconst IMAGE_SRC$1 = \"https://d27rt3a60hh1lx.cloudfront.net/images/spaces-logo.png\";\nconst float = keyframes(_templateObject2());\nconst Image$1 = styled.div(_templateObject3(), IMAGE_SRC$1, float);\nconst INVALID_KEYWORDS = [\"FBAN\", \"FBAV\", \"Instagram\"];\n\nconst BrowserChecker = props => {\n  const {\n    children\n  } = props;\n  const [valid, setValid] = useState(true);\n  useEffect(() => {\n    const ua = navigator.userAgent || navigator.vendor || \"\";\n    const valid = INVALID_KEYWORDS.filter(val => ua.includes(val));\n    setValid(valid.length === 0);\n  }, []);\n\n  if (valid) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n  }\n\n  return /*#__PURE__*/React.createElement(Container, null, /*#__PURE__*/React.createElement(Image$1, null), \"This browser cannot run our application.\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), \"Click those three dots at the top right\", /*#__PURE__*/React.createElement(\"br\", null), \"to open in Safari or Chrome.\");\n};\n\nfunction _templateObject$1() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: fixed;\\n  top: 50vh;\\n  left: 50vw;\\n  z-index: 1;\\n  mix-blend-mode: difference;\\n\\n  &::before {\\n    content: \\\"\\\";\\n    display: block;\\n    height: 11px;\\n    border-left: 1px solid #fff;\\n    margin-bottom: -6px;\\n  }\\n\\n  &::after {\\n    content: \\\"\\\";\\n    display: block;\\n    width: 11px;\\n    border-top: 1px solid #fff;\\n    margin-left: -5px;\\n  }\\n\"]);\n\n  _templateObject$1 = function () {\n    return data;\n  };\n\n  return data;\n}\nconst Element = styled.div(_templateObject$1());\n\nconst Crosshair = () => {\n  return /*#__PURE__*/React.createElement(Element, null);\n};\n\nconst DefaultTouch = {\n  pos: new Vector2(0, 0),\n  id: -1\n};\nconst DRAG_SENSITIVITY = new Vector2(0.7, 0.7);\n/**\n * TouchFPSCamera controls the camera rotation by detecting\n * touch drag on the screen. Unlike MouseFPSCamera, this component\n * does not have a way to pause, that must be done externally.\n *\n * @param props\n * @constructor\n */\n\nconst TouchFPSCamera = props => {\n  const {\n    quaternion,\n    position\n  } = props;\n  const touchStartPos = useRef(DefaultTouch);\n  const originEuler = useRef(new Euler(0, 0, 0, \"YXZ\"));\n  const {\n    camera\n  } = useThree();\n  useFrame(() => {\n    if (position.current) {\n      var _camera$position;\n\n      const {\n        x: pX,\n        y: pY,\n        z: pZ\n      } = position.current;\n      camera == null ? void 0 : (_camera$position = camera.position) == null ? void 0 : _camera$position.set(pX, pY, pZ);\n    }\n  });\n\n  const getNewEuler = (dragX, dragY) => {\n    const newEuler = originEuler.current.clone();\n    const moveX = dragX - touchStartPos.current.pos.x;\n    const moveY = dragY - touchStartPos.current.pos.y;\n    newEuler.setFromQuaternion(camera.quaternion);\n    newEuler.y = originEuler.current.y - moveX * DRAG_SENSITIVITY.x / 100;\n    newEuler.x = originEuler.current.x - moveY * DRAG_SENSITIVITY.y / 100;\n    newEuler.x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, newEuler.x));\n    return newEuler;\n  };\n\n  const tappedNipple = ev => {\n    // get the relevant touched element (casted as an Element)\n    const ele = ev.touches[ev.touches.length - 1].target;\n    return ele.classList.contains(\"nipple-container\") || ele.classList.contains(\"front\") || ele.classList.contains(\"back\");\n  };\n\n  const getCurrentTouch = touches => {\n    const len = touches.length;\n\n    for (let i = 0; i < len; i++) {\n      if (touchStartPos.current.id === touches[i].identifier) {\n        return touches[i];\n      }\n    }\n\n    return undefined;\n  }; // touch move scripts\n\n\n  const onTouchStart = ev => {\n    if (touchStartPos.current.id !== -1) {\n      return;\n    }\n\n    if (tappedNipple(ev)) {\n      touchStartPos.current = DefaultTouch;\n      return;\n    } // get last in list (most recent touch) to not confuse with movement\n\n\n    const touchIndex = ev.touches.length - 1;\n    const {\n      clientX,\n      clientY,\n      identifier: id\n    } = ev.touches[touchIndex];\n    touchStartPos.current = {\n      pos: new Vector2(clientX, clientY),\n      id\n    };\n  };\n\n  const onTouchMove = ev => {\n    const touch = getCurrentTouch(ev.touches);\n\n    if (!touch) {\n      return;\n    }\n\n    const {\n      clientX,\n      clientY\n    } = touch;\n    const newEuler = getNewEuler(clientX, clientY);\n    camera.quaternion.setFromEuler(newEuler);\n    quaternion.current = camera.quaternion;\n  };\n\n  const onTouchEnd = ev => {\n    const touch = getCurrentTouch(ev.changedTouches);\n\n    if (!touch) {\n      return;\n    }\n\n    const {\n      clientX,\n      clientY\n    } = touch;\n    originEuler.current = getNewEuler(clientX, clientY);\n    touchStartPos.current.id = -1;\n  };\n\n  useEffect(() => {\n    camera == null ? void 0 : camera.lookAt(0, 2, 0);\n    quaternion.current = camera.quaternion;\n  }, []);\n  useEffect(() => {\n    document.addEventListener(\"touchstart\", onTouchStart);\n    document.addEventListener(\"touchmove\", onTouchMove);\n    document.addEventListener(\"touchend\", onTouchEnd);\n    return () => {\n      document.removeEventListener(\"touchstart\", onTouchStart);\n      document.removeEventListener(\"touchmove\", onTouchMove);\n      document.removeEventListener(\"touchend\", onTouchEnd);\n    };\n  }, []); // @ts-ignore\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null);\n};\n\n/**\n * NippleMovement gives the player a direction to move by taking\n * input from a nipple (joystick).\n *\n * Direction is stored as a Vector3 with the following format\n *    x: left/right movement, + for right\n *    y: forward/back movement, + for forwards\n *    z: up/down movement, + for up\n *\n * @param props\n * @constructor\n */\nconst NippleMovement = props => {\n  const {\n    direction,\n    nippleContainer\n  } = props;\n  const nipple = useRef();\n  const {\n    container\n  } = useEnvironment();\n  useEffect(() => {\n    if (container) {\n      nippleContainer.current = document.createElement(\"divs\");\n      nippleContainer.current.style.position = \"fixed\";\n      nippleContainer.current.style.left = \"0\";\n      nippleContainer.current.style.bottom = \"0\";\n      nippleContainer.current.style.width = \"40%\";\n      nippleContainer.current.style.maxWidth = \"160px\";\n      nippleContainer.current.style.height = \"25%\";\n      nippleContainer.current.style.height = \"160px\";\n      nippleContainer.current.style.zIndex = \"5\"; // add class identifier to nippleContainer to identify touchEvents\n\n      nippleContainer.current.classList.add(\"nipple-container\");\n      container.appendChild(nippleContainer.current);\n      nipple.current = nipplejs.create({\n        zone: nippleContainer.current,\n        mode: \"static\",\n        position: {\n          left: \"50%\",\n          top: \"50%\"\n        },\n        color: \"gray\",\n        size: 120,\n        restOpacity: 0.5\n      });\n      nipple.current.on(\"move\", (evt, data) => {\n        direction.current.set(data.vector.x, -data.vector.y, 0);\n      });\n      nipple.current.on(\"end\", () => {\n        direction.current.set(0, 0, 0);\n      });\n      return () => {\n        if (nipple.current) {\n          nipple.current.destroy();\n        }\n      };\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null);\n};\n\nconst MobileControls = props => {\n  const {\n    direction,\n    quaternion,\n    position\n  } = props;\n  const nippleContainer = useRef(null);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NippleMovement, {\n    direction: direction,\n    nippleContainer: nippleContainer\n  }), /*#__PURE__*/React.createElement(TouchFPSCamera, {\n    quaternion: quaternion,\n    position: position,\n    nippleContainer: nippleContainer\n  }));\n};\n\n/**\n * KeyboardMovement gives the player a direction to move by taking\n * input from any source (currently keyboard) and calculating\n * relative direction.\n *\n * Direction is stored as a Vector3 with the following format\n *    x: left/right movement, + for right\n *    y: forward/back movement, + for forwards\n *    z: up/down movement, + for up\n *\n * @param props\n * @constructor\n */\nconst KeyboardMovement = props => {\n  const {\n    direction\n  } = props;\n  const pressedKeys = useRef([false, false, false, false]); // key events\n\n  const calcDirection = () => {\n    const press = pressedKeys.current; // [w, a, s, d]\n\n    const yAxis = -1 * Number(press[0]) + Number(press[2]);\n    const xAxis = -1 * Number(press[1]) + Number(press[3]);\n    return new Vector3(xAxis, yAxis, 0);\n  };\n\n  const onKeyDown = ev => {\n    if (ev.key === \"w\" || ev.key === \"W\" || ev.key === \"ArrowUp\") {\n      pressedKeys.current[0] = true;\n    }\n\n    if (ev.key === \"a\" || ev.key === \"A\" || ev.key === \"ArrowLeft\") {\n      pressedKeys.current[1] = true;\n    }\n\n    if (ev.key === \"s\" || ev.key === \"S\" || ev.key === \"ArrowDown\") {\n      pressedKeys.current[2] = true;\n    }\n\n    if (ev.key === \"d\" || ev.key === \"D\" || ev.key === \"ArrowRight\") {\n      pressedKeys.current[3] = true;\n    }\n\n    direction.current = calcDirection();\n  };\n\n  const onKeyUp = ev => {\n    if (ev.key === \"w\" || ev.key === \"W\" || ev.key === \"ArrowUp\") {\n      pressedKeys.current[0] = false;\n    }\n\n    if (ev.key === \"a\" || ev.key === \"A\" || ev.key === \"ArrowLeft\") {\n      pressedKeys.current[1] = false;\n    }\n\n    if (ev.key === \"s\" || ev.key === \"S\" || ev.key === \"ArrowDown\") {\n      pressedKeys.current[2] = false;\n    }\n\n    if (ev.key === \"d\" || ev.key === \"D\" || ev.key === \"ArrowRight\") {\n      pressedKeys.current[3] = false;\n    }\n\n    direction.current = calcDirection();\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", onKeyDown);\n    document.addEventListener(\"keyup\", onKeyUp);\n    return () => {\n      document.removeEventListener(\"keydown\", onKeyDown);\n      document.removeEventListener(\"keyup\", onKeyUp);\n    };\n  }, [onKeyUp, onKeyDown]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null);\n};\n\nextend({\n  PointerLockControls\n});\n\n/**\n * MouseFPSCamera controls the camera rotation, set up as a first\n * person view. It takes care of user input to set the camera rotation\n * and passed the quaternion of the camera up. Its position is attached\n * to the passed position, probably the player's position.\n *\n * @param props\n * @constructor\n */\nconst MouseFPSCamera = props => {\n  const {\n    quaternion,\n    position\n  } = props;\n  const {\n    setPaused,\n    paused,\n    addEvent\n  } = useEnvironment();\n  const {\n    camera,\n    gl\n  } = useThree();\n  const controls = useRef();\n  useFrame(() => {\n    var _controls$current;\n\n    if ((controls == null ? void 0 : (_controls$current = controls.current) == null ? void 0 : _controls$current.isLocked) === true) {\n      const lookAt = new Vector3(0, 0, -1);\n      lookAt.applyQuaternion(camera.quaternion);\n      lookAt.multiply(new Vector3(1, 0, 1)).normalize();\n      quaternion.current = camera.quaternion;\n    }\n\n    if (position.current) {\n      var _camera$position;\n\n      const {\n        x: pX,\n        y: pY,\n        z: pZ\n      } = position.current;\n      camera == null ? void 0 : (_camera$position = camera.position) == null ? void 0 : _camera$position.set(pX, pY, pZ);\n    }\n  }); // pointer locking events\n\n  const onLock = () => {\n    // dont't need to set if it's already set\n    if (paused) {\n      setPaused(false);\n    }\n  };\n\n  const onUnlock = () => {\n    // dont't need to set if it's already set\n    if (!paused) {\n      setPaused(true);\n    }\n  };\n\n  const lockCamera = () => {\n    var _controls$current2;\n\n    return controls == null ? void 0 : (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.lock();\n  };\n\n  const unlockCamera = () => {\n    var _controls$current3;\n\n    return controls == null ? void 0 : (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.unlock();\n  };\n\n  useEffect(() => {\n    // initial camera rotation\n    if (camera && quaternion) {\n      camera == null ? void 0 : camera.lookAt(0, 2, 0);\n      quaternion.current = camera.quaternion;\n    } // lock and unlock controls based on set paused value\n\n\n    addEvent(\"paused\", (pausedVal, overlayVal) => {\n      if (pausedVal) {\n        unlockCamera();\n      } else {\n        lockCamera();\n      }\n    });\n  }, []);\n  useEffect(() => {\n    var _controls$current5, _controls$current6;\n\n    setTimeout(() => {\n      var _controls$current4;\n\n      if (!(controls == null ? void 0 : (_controls$current4 = controls.current) == null ? void 0 : _controls$current4.isLocked) && !paused) {\n        setPaused(true);\n      }\n    }, 250);\n    controls == null ? void 0 : (_controls$current5 = controls.current) == null ? void 0 : _controls$current5.addEventListener(\"lock\", onLock);\n    controls == null ? void 0 : (_controls$current6 = controls.current) == null ? void 0 : _controls$current6.addEventListener(\"unlock\", onUnlock);\n    return () => {\n      var _controls$current7, _controls$current8;\n\n      controls == null ? void 0 : (_controls$current7 = controls.current) == null ? void 0 : _controls$current7.removeEventListener(\"lock\", onLock);\n      controls == null ? void 0 : (_controls$current8 = controls.current) == null ? void 0 : _controls$current8.removeEventListener(\"unlock\", onUnlock);\n    };\n  }, [paused, controls]); // @ts-ignore\n\n  return /*#__PURE__*/React.createElement(\"pointerLockControls\", {\n    ref: controls,\n    args: [camera, gl.domElement]\n  });\n};\n\nconst DesktopControls = props => {\n  const {\n    direction,\n    quaternion,\n    position\n  } = props;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(KeyboardMovement, {\n    direction: direction\n  }), /*#__PURE__*/React.createElement(MouseFPSCamera, {\n    quaternion: quaternion,\n    position: position\n  }));\n};\n\nfunction createPlayerRef(bodyApi, position, velocity, lockControls, raycaster) {\n  const posVec = {\n    set: vec => bodyApi.position.set(vec.x, vec.y, vec.z),\n    get: () => position.current\n  };\n  const velVec = {\n    set: vec => bodyApi.velocity.set(vec.x, vec.y, vec.z),\n    get: () => velocity.current\n  };\n  const controls = {\n    lock: () => lockControls.current = true,\n    unlock: () => lockControls.current = false,\n    isLocked: () => lockControls.current\n  };\n  const playerRef = {\n    position: posVec,\n    velocity: velVec,\n    controls,\n    raycaster: raycaster.current\n  };\n  return playerRef;\n}\n\nconst VELOCITY_FACTOR = 250;\nconst SHOW_PLAYER_HITBOX = false;\n\n/**\n * Player represents a physics-enabled player in the environment, complete with a\n * control scheme and a physical representation that interacts with other physics-\n * enabled objects.\n *\n * There should only be one player per environment.\n *\n * @constructor\n */\nconst Player = props => {\n  const {\n    initPos = new Vector3(0, 1, 0),\n    initRot = 0\n  } = props;\n  const {\n    camera\n  } = useThree();\n  const {\n    paused,\n    setPlayer\n  } = useEnvironment(); // physical body\n\n  const [bodyRef, bodyApi] = useSphere(() => ({\n    mass: 500,\n    position: initPos.toArray(),\n    args: 1,\n    fixedRotation: true\n  })); // producer\n\n  const prevTime = useRef(performance.now());\n  const position = useRef(new Vector3(0, 0, 0));\n  const velocity = useRef(new Vector3(0, 0, 0));\n  const lockControls = useRef(false);\n  const raycaster = useRef(new Raycaster(new Vector3(), new Vector3(), 0, 3)); // consumer\n\n  const direction = useRef(new Vector3());\n  const quaternion = useRef(new Quaternion(0, 0, 0, 0)); // rad on y axis\n  // setup player\n\n  useEffect(() => {\n    // store position and velocity\n    bodyApi.position.subscribe(p => {\n      position.current.set(p[0], p[1], p[2]);\n    });\n    bodyApi.velocity.subscribe(v => velocity.current.set(v[0], v[1], v[2]));\n    const xLook = initPos.x + 100 * Math.cos(initRot);\n    const zLook = initPos.z + 100 * Math.sin(initRot);\n    camera == null ? void 0 : camera.lookAt(xLook, initPos.y, zLook);\n    setPlayer(createPlayerRef(bodyApi, position, velocity, lockControls, raycaster));\n  }, []); // update player every frame\n\n  useFrame(() => {\n    const time = performance.now(); // update raycaster\n\n    if (position.current && quaternion.current) {\n      raycaster.current.ray.origin.copy(position.current);\n      const lookAt = new Vector3(0, 0, -1);\n      lookAt.applyQuaternion(quaternion.current);\n      raycaster.current.ray.direction.copy(lookAt);\n    }\n\n    if (paused) {\n      // stop player from moving when paused\n      bodyApi == null ? void 0 : bodyApi.velocity.set(0, 0, 0);\n    } else {\n      // get time since last computation\n      const delta = (time - prevTime.current) / 1000; // get forward/back movement and left/right movement velocities\n\n      const inputVelocity = new Vector3(0, 0, 0);\n\n      if (!lockControls.current) {\n        inputVelocity.x = direction.current.x * delta * 0.75 * VELOCITY_FACTOR;\n        inputVelocity.z = direction.current.y * delta * VELOCITY_FACTOR;\n      } // apply quaternion to get adjusted direction based on camera\n\n\n      const moveQuaternion = quaternion.current.clone();\n      moveQuaternion.x = 0;\n      moveQuaternion.z = 0;\n      inputVelocity.applyQuaternion(moveQuaternion); // keep y velocity intact and update velocity\n\n      inputVelocity.add(new Vector3(0, velocity.current.y, 0));\n      bodyApi == null ? void 0 : bodyApi.velocity.set(inputVelocity.x, inputVelocity.y, inputVelocity.z);\n    }\n\n    prevTime.current = time;\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, isMobile ? /*#__PURE__*/React.createElement(MobileControls, {\n    quaternion: quaternion,\n    position: position,\n    direction: direction\n  }) : /*#__PURE__*/React.createElement(DesktopControls, {\n    quaternion: quaternion,\n    position: position,\n    direction: direction\n  }), /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: bodyRef,\n    name: \"player\"\n  }, SHOW_PLAYER_HITBOX ));\n};\n\nfunction _templateObject$2() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: 200;\\n  background: white;\\n  transition: opacity 0.5s ease;\\n  transition-delay: 0.25s;\\n  opacity: \", \";\\n  pointer-events: \", \";\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n\"]);\n\n  _templateObject$2 = function () {\n    return data;\n  };\n\n  return data;\n}\nconst Container$1 = styled.div(_templateObject$2(), props => props.finished ? 0 : 1, props => props.finished ? \"none\" : \"all\");\n\nconst LoadingScreen = () => {\n  const progress = useControlledProgress();\n  return /*#__PURE__*/React.createElement(Container$1, {\n    finished: progress == 100,\n    landing: false\n  }, progress, \"%\");\n};\n\nextend({\n  EffectComposer,\n  RenderPass,\n  GlitchPass,\n  ShaderPass,\n  BloomPass\n});\nconst RealisticEffects = () => {\n  const {\n    gl,\n    scene,\n    camera,\n    size\n  } = useThree();\n  const gammaCorrection = new ShaderPass(GammaCorrectionShader);\n  const fxaaPass = new ShaderPass(FXAAShader);\n  const pixelRatio = window ? window.devicePixelRatio : 2; // @ts-ignore\n\n  fxaaPass.material.uniforms[\"resolution\"].value.x = 1 / (window.innerWidth * pixelRatio); // @ts-ignore\n\n  fxaaPass.material.uniforms[\"resolution\"].value.y = 1 / (window.innerHeight * pixelRatio);\n  const composer = useRef();\n  useEffect(() => {\n    var _composer$current;\n\n    return void (composer == null ? void 0 : (_composer$current = composer.current) == null ? void 0 : _composer$current.setSize(size.width, size.height));\n  }, [size]);\n  useEffect(() => {\n    var _composer$current2, _composer$current3;\n\n    gammaCorrection.renderToScreen = true;\n    composer == null ? void 0 : (_composer$current2 = composer.current) == null ? void 0 : _composer$current2.addPass(gammaCorrection);\n    fxaaPass.renderToScreen = true;\n    composer == null ? void 0 : (_composer$current3 = composer.current) == null ? void 0 : _composer$current3.addPass(fxaaPass);\n  }, []);\n  useFrame(() => {\n    var _composer$current4;\n\n    composer == null ? void 0 : (_composer$current4 = composer.current) == null ? void 0 : _composer$current4.render();\n  }, 1);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"effectComposer\", {\n    ref: composer,\n    args: [gl]\n  }, /*#__PURE__*/React.createElement(\"renderPass\", {\n    attachArray: \"passes\",\n    args: [scene, camera]\n  })));\n};\n\nfunction _templateObject9() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: auto;\\n  margin: 10px 0;\\n  font-family: \\\"Space Mono\\\", monospace;\\n  font-size: 0.7em;\\n  text-align: center;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n\"]);\n\n  _templateObject9 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  font-size: 2em;\\n  text-align: center;\\n  margin-bottom: 0em;\\n  line-height: 1em;\\n\"]);\n\n  _templateObject8 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  margin-top: 8%;\\n  width: auto;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  font-family: \\\"Lato\\\", sans-serif;\\n\"]);\n\n  _templateObject7 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  top: 24px;\\n  left: 60px;\\n  width: auto;\\n  height: auto;\\n  color: white;\\n  cursor: pointer;\\n  transition: opacity 0.15s linear;\\n  font-size: 0.6em;\\n  line-height: 1em;\\n  :hover {\\n    opacity: 0.5;\\n  }\\n\"]);\n\n  _templateObject6 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  top: 24px;\\n  right: 60px;\\n  font-size: 0.6em;\\n\"]);\n\n  _templateObject5 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 90%;\\n  max-width: 400px;\\n  height: auto;\\n  cursor: pointer;\\n  text-align: center;\\n  font-size: 1.3em;\\n  font-family: \\\"Lato\\\", sans-serif;\\n  transition: opacity 0.15s linear;\\n  margin-top: 20px;\\n  background: white;\\n  line-height: 1em;\\n  padding: 12px 0;\\n  border-radius: 10px;\\n  :hover {\\n    opacity: 0.5;\\n  }\\n\"]);\n\n  _templateObject4 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3$1() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 90%;\\n  max-width: 400px;\\n  height: 91vw;\\n  max-height: 400px;\\n  padding: 20px 20px;\\n  color: white;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  position: relative;\\n  border-radius: 3%;\\n  background-image: url(\\\"https://spaces-gallery-assets.s3-us-west-1.amazonaws.com/images/pauseMenuBg.png\\\");\\n  background-position: center;\\n  background-size: cover;\\n\"]);\n\n  _templateObject3$1 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2$1() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: -1;\\n\"]);\n\n  _templateObject2$1 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject$3() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: 100;\\n  transition: opacity 0.25s ease;\\n  background: rgba(0, 0, 0, 0.5);\\n  display: flex;\\n  justify-content: center;\\n  flex-direction: column;\\n  align-items: center;\\n  opacity: \", \";\\n  pointer-events: \", \";\\n\"]);\n\n  _templateObject$3 = function () {\n    return data;\n  };\n\n  return data;\n}\nconst {\n  NEXT_PUBLIC_VERSION\n} = process.env;\nconst Container$2 = styled.div(_templateObject$3(), props => props.paused ? 1 : 0, props => props.paused ? \"all\" : \"none\");\nconst ClickContainer = styled.div(_templateObject2$1());\nconst Window = styled.div(_templateObject3$1());\nconst Continue = styled.div(_templateObject4());\nconst Version = styled.a(_templateObject5());\nconst Instagram = styled.div(_templateObject6());\nconst Header = styled.div(_templateObject7());\nconst Title = styled.div(_templateObject8());\nconst Text$1 = styled.div(_templateObject9());\n\nconst DesktopPause = () => {\n  const {\n    paused,\n    overlay,\n    setPaused\n  } = useEnvironment();\n\n  const closeOverlay = () => setPaused(false);\n\n  if (overlay) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(Container$2, {\n    paused: paused\n  }, /*#__PURE__*/React.createElement(ClickContainer, {\n    onClick: closeOverlay\n  }), /*#__PURE__*/React.createElement(Window, null, /*#__PURE__*/React.createElement(Version, null, \"v \", NEXT_PUBLIC_VERSION), /*#__PURE__*/React.createElement(Instagram, {\n    onClick: () => {\n      window.open(\"https://www.instagram.com/spaces3.0\");\n    }\n  }, \"@spaces3.0\"), /*#__PURE__*/React.createElement(Header, null, /*#__PURE__*/React.createElement(Title, null, \"SPACES\")), /*#__PURE__*/React.createElement(Text$1, null, /*#__PURE__*/React.createElement(\"p\", null, \"Move around: \", isMobile ? \"Joystick\" : \"W/A/S/D\"), /*#__PURE__*/React.createElement(\"p\", null, \"Look around: \", isMobile ? \"Drag\" : \"Mouse\"), /*#__PURE__*/React.createElement(\"p\", null, \"Pause: \", isMobile ? \"Menu Button\" : \"Esc\"))), /*#__PURE__*/React.createElement(Continue, {\n    onClick: closeOverlay\n  }, \"continue\"));\n};\n\nfunction _templateObject3$2() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 60px;\\n  height: 60px;\\n  margin: 10px;\\n  border-radius: 50%;\\n  text-align: center;\\n  background: url(\\\"https://spaces-gallery-assets.s3-us-west-1.amazonaws.com/images/spacesLogoReal.png\\\")\\n    center center no-repeat;\\n  background-size: cover;\\n\"]);\n\n  _templateObject3$2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2$2() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  z-index: 10;\\n\"]);\n\n  _templateObject2$2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject$4() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  z-index: 9;\\n\"]);\n\n  _templateObject$4 = function () {\n    return data;\n  };\n\n  return data;\n}\nconst Container$3 = styled.div(_templateObject$4());\nconst ClickContainer$1 = styled.div(_templateObject2$2());\nconst Window$1 = styled.div(_templateObject3$2());\n\nconst MobilePause = () => {\n  const {\n    paused,\n    setPaused\n  } = useEnvironment();\n\n  const togglePause = () => setPaused(!paused);\n\n  return /*#__PURE__*/React.createElement(Container$3, {\n    paused: paused\n  }, /*#__PURE__*/React.createElement(ClickContainer$1, {\n    onClick: togglePause\n  }), !paused ? /*#__PURE__*/React.createElement(Window$1, null) : null);\n};\n\nfunction _templateObject$5() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  @font-face {\\n    font-family: \\\"MyriadPro\\\";\\n    src: url(\\\"https://d27rt3a60hh1lx.cloudfront.net/fonts/Myriad_Pro_Light.otf\\\");\\n  }\\n\\n  @font-face {\\n    font-family: \\\"Lomino\\\";\\n    src: url(\\\"https://d27rt3a60hh1lx.cloudfront.net/fonts/LominoUI_A_Rg.ttf\\\");\\n  }\\n\\n  html {\\n    position: fixed;\\n    height: 100%;\\n    overflow: hidden;\\n  }\\n\\n  body {\\n    margin: 0;\\n    width: 100vw;\\n    height: 100vh;\\n    user-select: none;\\n    overflow-y: auto;\\n    overflow-x: hidden;\\n    touch-action: pan-x pan-y;\\n    -webkit-overflow-scrolling: touch;\\n    font-family: \\\"MyriadPro\\\", sans-serif;\\n    font-size: 27px;\\n    @media screen and (max-width: 500px) {\\n      font-size: 24px;\\n    }\\n  }\\n\"]);\n\n  _templateObject$5 = function () {\n    return data;\n  };\n\n  return data;\n}\nconst globalStyles = css(_templateObject$5());\nvar GlobalStyles = (() => /*#__PURE__*/React.createElement(Global, {\n  styles: globalStyles\n}));\n\nfunction _templateObject$6() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  overflow: hidden;\\n\\n  canvas {\\n    position: absolute;\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n    left: 0;\\n    outline: 0;\\n  }\\n\"]);\n\n  _templateObject$6 = function () {\n    return data;\n  };\n\n  return data;\n}\nconst Container$4 = styled.div(_templateObject$6());\nconst defaultCanvasProps = {\n  shadowMap: true,\n  gl: {\n    alpha: false\n  },\n  camera: {\n    position: [0, 2, 0],\n    near: 0.01,\n    far: 100\n  }\n};\nconst defaultPhysicsProps = {\n  iterations: 20,\n  size: 10,\n  allowSleep: false,\n  defaultContactMaterial: {\n    friction: 0\n  }\n};\n\n/**\n *\n * Standard environment should be your first choice for an environment\n *\n * Player Type: First Person w/ WASD, Joystick controls\n * Physics: Enabled with default y=0 floor plane\n * Loading Screen: Spaces Edition\n * Pause Menu: Spaces Edition\n *\n */\nconst StandardEnvironment = props => {\n  const {\n    children,\n    canvasProps,\n    physicsProps,\n    player,\n    disableGround,\n    disableEffects\n  } = props;\n  const state = useEnvironmentState();\n  return /*#__PURE__*/React.createElement(BrowserChecker, null, /*#__PURE__*/React.createElement(GlobalStyles, null), /*#__PURE__*/React.createElement(Container$4, {\n    ref: state.containerRef\n  }, /*#__PURE__*/React.createElement(Canvas, _extends({}, defaultCanvasProps, canvasProps), /*#__PURE__*/React.createElement(Physics, _extends({}, defaultPhysicsProps, physicsProps), /*#__PURE__*/React.createElement(environmentStateContext.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(Player, {\n    initPos: player == null ? void 0 : player.pos,\n    initRot: player == null ? void 0 : player.rot\n  }), !disableGround && /*#__PURE__*/React.createElement(InfinitePlane, {\n    height: -0.001\n  }), !disableEffects && /*#__PURE__*/React.createElement(RealisticEffects, null), children))), /*#__PURE__*/React.createElement(environmentStateContext.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(LoadingScreen, null), /*#__PURE__*/React.createElement(DesktopPause, null), isMobile && /*#__PURE__*/React.createElement(MobilePause, null), /*#__PURE__*/React.createElement(Crosshair, null))));\n};\n\nfunction _templateObject4$1() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: fixed;\\n  bottom: 5vh;\\n  color: black;\\n  font-size: 1.5rem;\\n  cursor: pointer;\\n  :hover {\\n    text-decoration: underline;\\n  }\\n  transition: opacity 1s ease;\\n  transition-delay: 2s;\\n\\n  @media screen and (max-width: 650px) {\\n    font-size: 1rem;\\n  }\\n\"]);\n\n  _templateObject4$1 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3$3() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  padding: 0.5rem 0.5rem 0.5rem 0.5rem;\\n  background-image: linear-gradient(120deg, magenta, #5b328d);\\n  background-size: 120% 120%;\\n  background-position: top left;\\n  border-radius: 5px;\\n  transition: opacity 1s ease, background-position 0.3s linear;\\n  margin-bottom: 20px;\\n\\n  &:hover,\\n  &:active {\\n    background-position: bottom right;\\n  }\\n\"]);\n\n  _templateObject3$3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2$3() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  color: white;\\n  font-size: 4rem;\\n  font-weight: bold;\\n  outline: none;\\n  height: auto;\\n  width: auto;\\n  padding: 20px 20px 20px 20px;\\n  transition: opacity 1s ease;\\n  transition-delay: 0.5s;\\n  border-radius: 5px;\\n  background-color: transparent;\\n  cursor: pointer;\\n  border: none;\\n  font-family: \\\"Lato\\\", sans-serif;\\n\\n  @media screen and (max-width: 650px) {\\n    font-size: 2rem;\\n  }\\n\"]);\n\n  _templateObject2$3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject$7() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: 200;\\n  background: white;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n  font-family: \\\"Lato\\\", sans-serif;\\n\\n  transition: opacity 0.7s ease;\\n  \", \"\\n  \", \"\\n\"]);\n\n  _templateObject$7 = function () {\n    return data;\n  };\n\n  return data;\n}\nconst Container$5 = styled$1.div(_templateObject$7(), props => props.finished && \"opacity: 0;\", props => props.finished && \"pointer-events: none;\");\nconst Begin = styled$1.button(_templateObject2$3());\nconst BeginBackground = styled$1.div(_templateObject3$3());\nconst AlternateStart = styled$1.div(_templateObject4$1());\n\nconst Transition = props => {\n  const {\n    start,\n    beginExperience,\n    selfExplore\n  } = props;\n  return /*#__PURE__*/React.createElement(Container$5, {\n    finished: start\n  }, /*#__PURE__*/React.createElement(BeginBackground, null, /*#__PURE__*/React.createElement(Begin, {\n    onClick: beginExperience\n  }, \"Experience\")), /*#__PURE__*/React.createElement(AlternateStart, {\n    onClick: selfExplore\n  }, \"Or, Explore on Your Own\"));\n};\n\nfunction _templateObject2$4() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  z-index: 2;\\n  perspective: 500px;\\n  -moz-perspective: 500px;\\n  -webkit-perspective: 500px;\\n\\n  & > i {\\n    display: block;\\n    position: absolute;\\n    width: 8px;\\n    height: 8px;\\n    border-radius: 8px;\\n    opacity: 0;\\n    background: rgba(255, 0, 255, 0.5);\\n    box-shadow: 0px 0px 10px white;\\n    animation-name: \", \";\\n    animation-duration: 3s;\\n    animation-iteration-count: infinite;\\n    animation-timing-function: ease-in-out;\\n  }\\n\\n  & i:nth-of-type(1) {\\n    transform: rotate(11.6129deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.04839s;\\n  }\\n\\n  i:nth-of-type(2) {\\n    transform: rotate(23.22581deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.09677s;\\n  }\\n\\n  i:nth-of-type(3) {\\n    transform: rotate(34.83871deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.14516s;\\n  }\\n\\n  i:nth-of-type(4) {\\n    transform: rotate(46.45161deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.19355s;\\n  }\\n\\n  i:nth-of-type(5) {\\n    transform: rotate(58.06452deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.24194s;\\n  }\\n\\n  i:nth-of-type(6) {\\n    transform: rotate(69.67742deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.29032s;\\n  }\\n\\n  i:nth-of-type(7) {\\n    transform: rotate(81.29032deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.33871s;\\n  }\\n\\n  i:nth-of-type(8) {\\n    transform: rotate(92.90323deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.3871s;\\n  }\\n\\n  i:nth-of-type(9) {\\n    transform: rotate(104.51613deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.43548s;\\n  }\\n\\n  i:nth-of-type(10) {\\n    transform: rotate(116.12903deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.48387s;\\n  }\\n\\n  i:nth-of-type(11) {\\n    transform: rotate(127.74194deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.53226s;\\n  }\\n\\n  i:nth-of-type(12) {\\n    transform: rotate(139.35484deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.58065s;\\n  }\\n\\n  i:nth-of-type(13) {\\n    transform: rotate(150.96774deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.62903s;\\n  }\\n\\n  i:nth-of-type(14) {\\n    transform: rotate(162.58065deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.67742s;\\n  }\\n\\n  i:nth-of-type(15) {\\n    transform: rotate(174.19355deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.72581s;\\n  }\\n\\n  i:nth-of-type(16) {\\n    transform: rotate(185.80645deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.77419s;\\n  }\\n\\n  i:nth-of-type(17) {\\n    transform: rotate(197.41935deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.82258s;\\n  }\\n\\n  i:nth-of-type(18) {\\n    transform: rotate(209.03226deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.87097s;\\n  }\\n\\n  i:nth-of-type(19) {\\n    transform: rotate(220.64516deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.91935s;\\n  }\\n\\n  i:nth-of-type(20) {\\n    transform: rotate(232.25806deg) translate3d(80px, 0, 0);\\n    animation-delay: 0.96774s;\\n  }\\n\\n  i:nth-of-type(21) {\\n    transform: rotate(243.87097deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.01613s;\\n  }\\n\\n  i:nth-of-type(22) {\\n    transform: rotate(255.48387deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.06452s;\\n  }\\n\\n  i:nth-of-type(23) {\\n    transform: rotate(267.09677deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.1129s;\\n  }\\n\\n  i:nth-of-type(24) {\\n    transform: rotate(278.70968deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.16129s;\\n  }\\n\\n  i:nth-of-type(25) {\\n    transform: rotate(290.32258deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.20968s;\\n  }\\n\\n  i:nth-of-type(26) {\\n    transform: rotate(301.93548deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.25806s;\\n  }\\n\\n  i:nth-of-type(27) {\\n    transform: rotate(313.54839deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.30645s;\\n  }\\n\\n  i:nth-of-type(28) {\\n    transform: rotate(325.16129deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.35484s;\\n  }\\n\\n  i:nth-of-type(29) {\\n    transform: rotate(336.77419deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.40323s;\\n  }\\n\\n  i:nth-of-type(30) {\\n    transform: rotate(348.3871deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.45161s;\\n  }\\n\\n  i:nth-of-type(31) {\\n    transform: rotate(360deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.5s;\\n  }\\n\\n  i:nth-of-type(32) {\\n    transform: rotate(371.6129deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.54839s;\\n  }\\n\\n  i:nth-of-type(33) {\\n    transform: rotate(383.22581deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.59677s;\\n  }\\n\\n  i:nth-of-type(34) {\\n    transform: rotate(394.83871deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.64516s;\\n  }\\n\\n  i:nth-of-type(35) {\\n    transform: rotate(406.45161deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.69355s;\\n  }\\n\\n  i:nth-of-type(36) {\\n    transform: rotate(418.06452deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.74194s;\\n  }\\n\\n  i:nth-of-type(37) {\\n    transform: rotate(429.67742deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.79032s;\\n  }\\n\\n  i:nth-of-type(38) {\\n    transform: rotate(441.29032deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.83871s;\\n  }\\n\\n  i:nth-of-type(39) {\\n    transform: rotate(452.90323deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.8871s;\\n  }\\n\\n  i:nth-of-type(40) {\\n    transform: rotate(464.51613deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.93548s;\\n  }\\n\\n  i:nth-of-type(41) {\\n    transform: rotate(476.12903deg) translate3d(80px, 0, 0);\\n    animation-delay: 1.98387s;\\n  }\\n\\n  i:nth-of-type(42) {\\n    transform: rotate(487.74194deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.03226s;\\n  }\\n\\n  i:nth-of-type(43) {\\n    transform: rotate(499.35484deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.08065s;\\n  }\\n\\n  i:nth-of-type(44) {\\n    transform: rotate(510.96774deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.12903s;\\n  }\\n\\n  i:nth-of-type(45) {\\n    transform: rotate(522.58065deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.17742s;\\n  }\\n\\n  i:nth-of-type(46) {\\n    transform: rotate(534.19355deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.22581s;\\n  }\\n\\n  i:nth-of-type(47) {\\n    transform: rotate(545.80645deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.27419s;\\n  }\\n\\n  i:nth-of-type(48) {\\n    transform: rotate(557.41935deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.32258s;\\n  }\\n\\n  i:nth-of-type(49) {\\n    transform: rotate(569.03226deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.37097s;\\n  }\\n\\n  i:nth-of-type(50) {\\n    transform: rotate(580.64516deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.41935s;\\n  }\\n\\n  i:nth-of-type(51) {\\n    transform: rotate(592.25806deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.46774s;\\n  }\\n\\n  i:nth-of-type(52) {\\n    transform: rotate(603.87097deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.51613s;\\n  }\\n\\n  i:nth-of-type(53) {\\n    transform: rotate(615.48387deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.56452s;\\n  }\\n\\n  i:nth-of-type(54) {\\n    transform: rotate(627.09677deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.6129s;\\n  }\\n\\n  i:nth-of-type(55) {\\n    transform: rotate(638.70968deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.66129s;\\n  }\\n\\n  i:nth-of-type(56) {\\n    transform: rotate(650.32258deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.70968s;\\n  }\\n\\n  i:nth-of-type(57) {\\n    transform: rotate(661.93548deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.75806s;\\n  }\\n\\n  i:nth-of-type(58) {\\n    transform: rotate(673.54839deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.80645s;\\n  }\\n\\n  i:nth-of-type(59) {\\n    transform: rotate(685.16129deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.85484s;\\n  }\\n\\n  i:nth-of-type(60) {\\n    transform: rotate(696.77419deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.90323s;\\n  }\\n\\n  i:nth-of-type(61) {\\n    transform: rotate(708.3871deg) translate3d(80px, 0, 0);\\n    animation-delay: 2.95161s;\\n  }\\n\\n  i:nth-of-type(62) {\\n    transform: rotate(720deg) translate3d(80px, 0, 0);\\n    animation-delay: 3s;\\n  }\\n\\n  animation-delay: 1s;\\n  transition: transform 1.75s ease-out, opacity 1.75s ease-out;\\n  \", \";\\n  \", \";\\n\"]);\n\n  _templateObject2$4 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject$8() {\n  const data = _taggedTemplateLiteralLoose([\"\\n    from {\\n        opacity: 0.0;\\n    }\\n    to {\\n        opacity: 0.6;\\n        transform: translate3d(-4px, -4px, 570px);\\n    }\\n\"]);\n\n  _templateObject$8 = function () {\n    return data;\n  };\n\n  return data;\n}\nconst spin = keyframes(_templateObject$8());\nconst Wrapper = styled.div(_templateObject2$4(), spin, props => props.finished && \"transform: translate3d(0, 0, 500px)\", props => props.finished && \"opacity: 0\");\n\nconst SpinningLoading = props => {\n  const {\n    progress\n  } = props;\n  const listElements = [...Array(62)].map((x, ind) => /*#__PURE__*/React.createElement(\"i\", {\n    key: ind\n  }));\n  return /*#__PURE__*/React.createElement(Wrapper, {\n    finished: progress === 100\n  }, listElements);\n};\n\nfunction _templateObject4$2() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  animation: \", \" 6s linear infinite;\\n\"]);\n\n  _templateObject4$2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3$4() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  transition: opacity 1s ease-out;\\n  transition-delay: 1.25s;\\n  \", \"\\n\"]);\n\n  _templateObject3$4 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2$5() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  0%, 100% {\\n    transform: rotate(-0.35deg) translateZ(66px);\\n     opacity: 0.9;\\n  }\\n  25%, 75% {\\n    transform: rotate(0.2deg) translateZ(-10px);\\n     opacity: 0.3;\\n  }\\n  50% {\\n    transform: rotate(0.5deg) translateZ(46px);\\n    opacity: 0.69;\\n  }\\n\"]);\n\n  _templateObject2$5 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject$9() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: 201;\\n  background: white;\\n\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n  font-family: \\\"Lato\\\", sans-serif;\\n  perspective: 500px;\\n\\n  transition: opacity 1.5s ease;\\n  transition-delay: 2.25s;\\n  \", \"\\n  \", \"\\n\"]);\n\n  _templateObject$9 = function () {\n    return data;\n  };\n\n  return data;\n}\nconst Container$6 = styled.div(_templateObject$9(), props => props.finished && \"opacity: 0;\", props => props.finished && \"pointer-events: none;\");\nconst flickering = keyframes(_templateObject2$5());\nconst TextContainer = styled.div(_templateObject3$4(), props => props.finished && \"opacity: 0;\");\nconst Text$2 = styled.p(_templateObject4$2(), flickering);\n\nconst Loading = props => {\n  const {\n    progress\n  } = props;\n  return /*#__PURE__*/React.createElement(Container$6, {\n    finished: progress === 100\n  }, /*#__PURE__*/React.createElement(TextContainer, {\n    finished: progress === 1\n  }, /*#__PURE__*/React.createElement(Text$2, null, Math.floor(progress))), /*#__PURE__*/React.createElement(SpinningLoading, {\n    progress: progress\n  }));\n};\n\nconst PortalLoadingScreen = props => {\n  const {\n    setFixedPath\n  } = props;\n  const {\n    setPaused\n  } = useEnvironment();\n  const [start, setStart] = useState(false);\n\n  const beginExperience = () => {\n    setPaused(false);\n    setStart(true);\n  };\n\n  const selfExplore = () => {\n    setFixedPath(false);\n    beginExperience();\n  };\n\n  const progress = useControlledProgress();\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Loading, {\n    progress: progress\n  }), /*#__PURE__*/React.createElement(Transition, {\n    start: start,\n    beginExperience: beginExperience,\n    selfExplore: selfExplore\n  }));\n};\n\nconst fetchAccount = async username => {\n  let data;\n\n  try {\n    const response = await fetch(\"https://instagram.com/\" + username + \"/?__a=1\");\n    const result = await response.json();\n    data = result.graphql.user;\n  } catch (error) {\n    return error;\n  }\n\n  return data;\n};\n\n/**\n * Hook to fetch portal from backend gien an ID.\n *\n * If it finds an instagram username it will make network call to fetch instagram\n *\n * Will build assets from network fetch into a modified version of object\n * using the passed in builder function (optional)\n *\n * @param id\n * @param portalBuilder\n */\nconst usePortal = (id, portalBuilder) => {\n  const [result, setResult] = useState();\n  const [error, setError] = useState();\n  useEffect(() => {\n    const fetchData = async () => {\n      const localResult = {}; // fetch portal\n\n      try {\n        const response = await fetch(\"https://27m2mbw4h0.execute-api.us-west-1.amazonaws.com/fetch\", {\n          method: \"POST \",\n          body: JSON.stringify({\n            id\n          }),\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        const result = await response.json();\n        Object.assign(localResult, result);\n      } catch (err) {\n        var _err$data;\n\n        setError(((_err$data = err.data) == null ? void 0 : _err$data.message) || \"Could not find portal. Please contact us if the problem persists\");\n        return;\n      }\n\n      if (!localResult) {\n        setError(\"Could not find portal. Please contact us if the problem persists\");\n        return;\n      } // fetch instagram\n\n\n      const instagramUsername = localResult.instagramUsername;\n\n      if (instagramUsername) {\n        try {\n          const instagramResponse = await fetchAccount(instagramUsername);\n          localResult.instagram = instagramResponse;\n        } catch (err) {\n          console.error(\"Failed to fetch @\" + instagramUsername);\n        }\n      }\n\n      setResult(localResult);\n    };\n\n    if (!result && !error) {\n      fetchData();\n    }\n  }, [result, error]);\n  const builtResult = portalBuilder && result ? portalBuilder(result) : result;\n  return {\n    result: builtResult,\n    error\n  };\n};\n\nconst SHOW_PLAYER_HITBOX$1 = false;\n\n/**\n * Player represents a physics-enabled player in the environment, complete with a\n * control scheme and a physical representation that interacts with other physics-\n * enabled objects.\n *\n * There should only be one player per environment.\n *\n * @constructor\n */\nconst TrackPlayer = props => {\n  const {\n    initPos = new Vector3(0, 1, 0),\n    initRot = 0\n  } = props;\n  const {\n    camera\n  } = useThree();\n  const {\n    setPlayer\n  } = useEnvironment(); // physical body\n\n  const [bodyRef, bodyApi] = useSphere(() => ({\n    mass: 500,\n    position: initPos.toArray(),\n    args: 1,\n    fixedRotation: true\n  })); // producer\n\n  const position = useRef(new Vector3(0, 0, 0));\n  const velocity = useRef(new Vector3(0, 0, 0));\n  const lockControls = useRef(false);\n  const raycaster = useRef(new Raycaster(new Vector3(), new Vector3(), 0, 3)); // consumer\n\n  const quaternion = useRef(new Quaternion(0, 0, 0, 0)); // rad on y axis\n\n  const controls = useRef(); // setup player\n\n  useEffect(() => {\n    // store position and velocity\n    bodyApi.position.subscribe(p => {\n      position.current.set(p[0], p[1], p[2]);\n    });\n    bodyApi.velocity.subscribe(v => velocity.current.set(v[0], v[1], v[2]));\n    const xLook = initPos.x + 100 * Math.cos(initRot);\n    const zLook = initPos.z + 100 * Math.sin(initRot);\n    camera == null ? void 0 : camera.lookAt(xLook, initPos.y, zLook);\n\n    if (isMobile) {\n      window.addEventListener(\"click\", () => {\n        controls.current = new DeviceOrientationControls(camera);\n      });\n    }\n\n    setPlayer(createPlayerRef(bodyApi, position, velocity, lockControls, raycaster));\n  }, []); // update player every frame\n\n  useFrame(({\n    clock\n  }) => {\n    if (isMobile && controls.current) {\n      controls.current.update();\n    }\n\n    const dist = (22 + 50) / 2;\n    const x = dist * Math.cos(clock.getElapsedTime() / 10);\n    const z = dist * Math.sin(clock.getElapsedTime() / 10);\n    camera.position.set(x, 2, z);\n    return;\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !isMobile && /*#__PURE__*/React.createElement(MouseFPSCamera, {\n    quaternion: quaternion,\n    position: position\n  }), /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: bodyRef,\n    name: \"player\"\n  }, SHOW_PLAYER_HITBOX$1 ));\n};\n\nfunction _templateObject2$6() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  text-align: center;\\n  color: red;\\n  width: 100%;\\n  max-width: 500px;\\n  padding: 0 10%;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n\"]);\n\n  _templateObject2$6 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject$a() {\n  const data = _taggedTemplateLiteralLoose([\"\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  overflow: hidden;\\n\\n  canvas {\\n    position: absolute;\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n    left: 0;\\n    outline: 0;\\n  }\\n\"]);\n\n  _templateObject$a = function () {\n    return data;\n  };\n\n  return data;\n}\nconst Container$7 = styled.div(_templateObject$a());\nconst ErrorText = styled.p(_templateObject2$6());\nconst defaultCanvasProps$1 = {\n  shadowMap: true,\n  gl: {\n    alpha: false\n  },\n  camera: {\n    position: [0, 2, 0],\n    near: 0.01,\n    far: 200\n  }\n};\nconst defaultPhysicsProps$1 = {\n  iterations: 20,\n  size: 10,\n  allowSleep: false,\n  defaultContactMaterial: {\n    friction: 0\n  }\n};\n\n/**\n *\n * Provides an environment that loads a portal based on the url\n *\n * Player Type: First Person on a track or with WASD/Joystick\n * Physics: Enabled with default y=0 floor plane\n * Loading Screen: Spaces Portal Edition\n * Pause Menu: Spaces Edition\n *\n */\nconst PortalEnvironment = props => {\n  const {\n    children,\n    canvasProps,\n    physicsProps,\n    children2d,\n    portalId,\n    portalHandler\n  } = props;\n  const {\n    result,\n    error\n  } = usePortal(portalId, portalHandler);\n  const state = useEnvironmentState();\n  const localState = { ...state,\n    portal: result\n  };\n  const [fixedPath, setFixedPath] = useState(true);\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(ErrorText, null, error);\n  }\n\n  return /*#__PURE__*/React.createElement(BrowserChecker, null, /*#__PURE__*/React.createElement(GlobalStyles, null), /*#__PURE__*/React.createElement(Container$7, {\n    ref: state.containerRef\n  }, /*#__PURE__*/React.createElement(Canvas, _extends({}, defaultCanvasProps$1, canvasProps), /*#__PURE__*/React.createElement(Physics, _extends({}, defaultPhysicsProps$1, physicsProps), /*#__PURE__*/React.createElement(environmentStateContext.Provider, {\n    value: localState\n  }, fixedPath ? /*#__PURE__*/React.createElement(TrackPlayer, null) : /*#__PURE__*/React.createElement(TrackPlayer, {\n    initPos: new Vector3(0, 2, 53)\n  }), children))), /*#__PURE__*/React.createElement(environmentStateContext.Provider, {\n    value: localState\n  }, children2d, /*#__PURE__*/React.createElement(PortalLoadingScreen, {\n    setFixedPath: setFixedPath\n  }), /*#__PURE__*/React.createElement(DesktopPause, null), isMobile && /*#__PURE__*/React.createElement(MobilePause, null))));\n};\n\nexport { Arrow, Audio, Background, Floating, HDRI, Image, InfinitePlane, Interactable, Logo, PortalEnvironment, RealisticEffects, Shop, StandardEnvironment, Text, Video, environmentStateContext, useControlledProgress, useConvexCollision, useEnvironment, useEnvironmentState, useShopify, useTrimeshCollision };\nimport React from \"react\";"]},"metadata":{},"sourceType":"module"}